Quero fazer umas postagens sobre autocustÃ³dia de Bitcoin no futuro, mas saber como verficar arquivos com GPG Ã© um prÃ©-requisito e por isso escrevi esta explicaÃ§Ã£o simples e introdutÃ³ria sobre GPG. Vou explicar aqui apenas o mÃ­nimo que vocÃª precisa saber.
;br

;H Criptografia AssimÃ©trica
GPG ou GnuPG Ã© uma ferramenta de criptografia simÃ©trica e assimÃ©trica. O que interessa para nÃ³s Ã© a assimÃ©trica. Que porra Ã© isso?
Diferente da criptografia simÃ©trica, que se usa uma senha para criptografar dados, a assimÃ©trica usa duas chaves, a chave privada ou secreta e a chave pÃºblica. Vou me referir a elas como <mono>ğŸ”‘Secret Key</mono> (ou <i>private key</i>) e <mono>ğŸ”“Public Key</mono> a partir de agora.
;br

NÃ£o vou me aprofundar, mas os conceitos principais que vocÃª tem que entender sÃ£o:
;^ol
;li A <mono>ğŸ”‘Secret Key</mono> Ã© criada aleatoriamente e a <mono>ğŸ”“Public Key</mono> Ã© gerada a partir da <mono>ğŸ”‘Secret Key</mono>.
;li Como dito no item 1, vocÃª pode descobrir qual Ã© a <mono>ğŸ”“Public Key</mono> se tiver a <mono>ğŸ”‘Secret Key</mono>.
;li VocÃª NÃƒO pode descobrir a <mono>ğŸ”‘Secret Key</mono> a partir da <mono>ğŸ”“Public Key</mono>.
;li A <mono>ğŸ”“Public Key</mono> Ã© pÃºblica e vocÃª mostra para todo mundo, estampa na camiseta, faz uma tatuagem, etc...
;li A <mono>ğŸ”‘Secret Key</mono> Ã© SECRETA, PRIVADA, e se vocÃª deixar vazar vocÃª se lascou.
;$ol

;h E o mais importante: 
1. Uma mensagem* encriptada pela <mono>ğŸ”“Public Key</mono> sÃ³ pode ser decriptada pela <mono>ğŸ”‘Secret Key</mono> associada.
2. Uma mensagem* encriptada pela <mono>ğŸ”‘Secret Key</mono> sÃ³ pode ser decriptada pela <mono>ğŸ”“Public Key</mono> associada.
*= entenda <i>mensagem</i> como dado, informaÃ§Ã£o, arquivo, etc...
;br

;H Usos do GPG
VocÃª pode usar GPG para basicamente duas coisas:
;^ol
;li Encriptar mensagens usando a <mono>ğŸ”“Public Key</mono> do destinatÃ¡rio, ele usarÃ¡ a <mono>ğŸ”‘Secret Key</mono> dele para decriptar.
;li Encriptar mensagens usando sua prÃ³pria <mono>ğŸ”‘Secret Key</mono>, de forma que qualquer um que tenha sua <mono>ğŸ”“Public Key</mono> possa decriptar.
;$ol 
Leia novamente o item 2 e pense sobre isso. Se todos conhecem minha <mono>ğŸ”“Public Key</mono>, todos podem decriptar uma mensagem assinada pela minha <mono>ğŸ”‘Secret Key</mono>. 
Qual Ã© a utilidade de encriptar uma mensagem que todos podem decriptar?
Ã‰ Ãºtil porque se eles conseguem decriptar a mensagem com sua <mono>ğŸ”“Public Key</mono>, entÃ£o ela, a mensagem, com certeza foi encriptada com sua <mono>ğŸ”‘Secret Key</mono>.
Ou seja, vocÃª pode usar essa caracterÃ­stica para assinar uma mensagem, gerar uma assinatura digital.
;br

;h O que Ã© assinar uma mensagem?
Assinar uma mensagem Ã© encriptÃ¡-la com sua <mono>ğŸ”‘Secret Key</mono> de forma que somente quem tem sua <mono>ğŸ”“Public Key</mono> possa decriptÃ¡-la. 
Isso Ã© uma simplificaÃ§Ã£o, mas Ã© uma boa forma de entender.
;br

E por que Ã© Ãºtil? 
Porque isso serve como uma <mono>ğŸ”assinatura</mono>. Quem recebeu a mensagem terÃ¡ a CERTEZA matemÃ¡tica de que aquela mensagem foi assinada com sua <mono>ğŸ”‘Secret Key</mono> e que ela veio de vocÃª - a nÃ£o ser que vocÃª tenha cagado no pau de deixado a <mono>ğŸ”‘Secret Key</mono> vazar.
;br

Nesse contexto, faria sentido chamar a <mono>ğŸ”‘Secret Key</mono> de <mono>ğŸ”‘Signing Key</mono> e a <mono>ğŸ”“Public Key</mono> de <mono>ğŸ”“Verifying Key</mono>. Chave de assinatura e de verificaÃ§Ã£o. Mas vou continuar com o nome mais padrÃ£o.
;br

;h E o que acontece se eu deixar vazar a <mono>ğŸ”‘Secret Key</mono>?
;^ol
;li Qualquer um com sua <mono>ğŸ”‘Secret Key</mono> que tiver acesso a mensagens enviadas para vocÃª (encriptadas na sua <mono>ğŸ”“Public Key</mono>) poderÃ¡ ler todas essas mensagens.
;li Qualquer um com sua <mono>ğŸ”‘Secret Key</mono> poderÃ¡ assinar mensagens e se passar por vocÃª.
;$ol

Ã‰ assim que criptografia assimÃ©trica funciona. Se ficou confuso, peÃ§o que leia novamente. Ã‰ mais simples do que parece.
;br

;H Como verificar mensagens com GPG
Em outras palavras, como checar se o software que baixei tem autenticidade e integridade.
;^ol
;li Autenticidade: se foi assinado com uma <mono>ğŸ”‘Secret Key</mono> que confio.
;li Integridade: se nÃ£o foi alterado no meio do caminho.
;$ol
;br

Se vocÃª nÃ£o estiver usando Linux, pesquise na internet como usar o GPG no seu sistema operacional. Mas se vocÃª realmente quiser fazer autocustÃ³dia, use Linux. Windows Ã© muito menos seguro.
NÃ£o somente leia, faÃ§a vocÃª mesmo os passos e pratique para aprender como funciona.
;br

Para fins de exemplo, nÃ³s vamos baixar e verificar o Tor Browser.
Os passos sÃ£o:
;^ol
;li Baixe o software.
;li Baixe a <mono>ğŸ”assinatura</mono>.
;li Baixe e importe a <mono>ğŸ”“Public Key</mono> do signatÃ¡rio do software.
;li Verifique em VÃRIOS lugares se a <mono>ğŸ”“Public Key</mono> Ã© mesmo confiÃ¡vel, checando o <mono>fingerprint</mono>.
;li Verifique a integridade e a autenticidade do arquivo baixado usando GPG.
;$ol
;br


;h 1. Baixe o software
VÃ¡ atÃ© o site do Tor, em ;url "https://www.torproject.org" "https://www.torproject.org" e baixe. Escolhi a versÃ£o para Linux. 
;br

;h 2. Baixe a <mono>ğŸ”assinatura</mono>
Procure no site por checksums, signatures, ou algo assim. No caso do Tor, vocÃª encontra <i>Signature</i> abaixo do link de download.
;br

;^C
$ ls
tor-browser-linux-x86_64-14.0.6.tar.xz
tor-browser-linux-x86_64-14.0.6.tar.xz.asc
;$C
;br

Geralmente a <mono>ğŸ”assinatura</mono> terÃ¡ o mesmo nome do arquivo, mas com um .asc no final.
Uma <mono>ğŸ”assinatura</mono> pode estar em binÃ¡rio, mas geralmente serÃ¡ um arquivo em texto mesmo e vocÃª pode lÃª-lo:
;br


;^C
$ cat tor-browser-linux-x86_64-14.0.6.tar.xz.asc
-----BEGIN PGP SIGNATURE-----

iQIzBAABCgAdFiEEyq5AiuviKI6W/F1eFXQyz3imVykFAmemQBoACgkQFXQyz3im
VymtIRAAmWa4evWPVsCOjmhRIxQKsUxLBXjcUrOQkGKWIDfLadSsKaiEQjcF3d6d
dVTWLE7HNmcEbcEczdTGrTAPGccoIBPIHVN1Rk5ij+Ov5xyzBReEto3xTeyEAP25
057jITJR8gHNKnW/1eza+oAvPUOrjD3zTxyD7dTn7NjLaL9HIUNLUy+/2CaH1M1L
xzeNE9MSVP6R8SkEHdQmYbB7CITjthQo3v6owHN7lVn2nx4a3Kg2rbRMDfYqlXOa
Oo+JL8qiN7lHbvvCgSpmTvWsuIRYhYiG8BGttFi3wYOPYQe5ZSRMBp9c+4uTZo9D
JUV8tLPbMic2r0fNL4wQhxR1Jp5P9R0dqf5XsZ+NTo6Ip/cjer2CXKDIff0JnG7T
sO2Ccc6PEcR20vDwotcKcH/HIeyfIuQoqBYwamm+eepYP4rRN+56rknqalPLnWu0
gNMKuw63azuGkyiEEdl4ZAvJpm7z+64Bht/dZPMJ4KplyMytahJokH2kFilvCsKh
6gQbP6Xsh1B1zfyNGCjXMhfx8ciAjul7ocV1S67tt0rfSonWuJUp/h/QdpVoJjOi
d3Vn0az+R6r02qfLflHPxYQKzcpp8Do62b26EZQGScI3/0SFtFm40neXi7zNe2gQ
wohJg7PjntB2nClQPbuWPVBf74t8kH7iDe9El6GhQzv2CSFQ85o=
=q3ol
-----END PGP SIGNATURE-----
;$C
;br

HÃ¡ um cabeÃ§alho informando que Ã© uma <mono>ğŸ”assinatura</mono> PGP. PGP Ã© o protocolo, GPG Ã© a implementaÃ§Ã£o que estamos usando. NÃ£o se preocupe com isso agora. Esse monte de texto Ã© a <mono>ğŸ”assinatura</mono> em si.
;br


Temos o arquivo e a <mono>ğŸ”assinatura</mono> .asc, mas nÃ£o podemos verificar porque falta a <mono>ğŸ”“Public Key</mono> do signatÃ¡rio.
;br


;h 3. Baixe e importe a <mono>ğŸ”“Public Key</mono> do signatÃ¡rio do software
Geralmente vocÃª nÃ£o irÃ¡ encontrar a <mono>ğŸ”“Public Key</mono> no mesmo site onde baixou os outros arquivos. Por quÃª? Por seguranÃ§a. Se alguÃ©m hackear o site poderÃ¡ facilmente trocar a <mono>ğŸ”“Public Key</mono> e fazer uma fraude. 
;br

Por isso se deixa a <mono>ğŸ”“Public Key</mono> em outro lugar e por isso vocÃª pesquisa sobre a <mono>fingerprint</mono> da <mono>ğŸ”“Public Key</mono> antes de confiar nela - mais sobre isso abaixo. VocÃª pode encontrar um link para a <mono>ğŸ”“Public Key</mono> ou Ã s vezes nem isso e terÃ¡ que pesquisar. 
;br


No caso do exemplo, abaixando a pÃ¡gina, vocÃª encontra um link: <i>How can I verify Tor Browser signature?</i> e entrando nessa pÃ¡gina eles te explicam como baixar a <mono>ğŸ”“Public Key</mono> para fazer a verificaÃ§Ã£o. 
;br

Abaixo na mesma pÃ¡gina, na seÃ§Ã£o <i>Workaround (using a public key)</i> eles dÃ£o o link para a <mono>ğŸ”“Public Key</mono>: ;url "https://keys.openpgp.org/vks/v1/by-fingerprint/EF6E286DDA85EA2A4BA7DE684E2C6E8793298290" "https://keys.openpgp.org/vks/v1/by-fingerprint/EF6E286DDA85EA2A4BA7DE684E2C6E8793298290". O openpgp.org Ã© um keyserver. NÃ£o vou entrar no mÃ©rito de keyservers, mas sÃ£o repositÃ³rios de <mono>ğŸ”“Public Keys</mono> na internet, vocÃª coloca sua <mono>ğŸ”“Public Key</mono> lÃ¡ para as pessoas usarem.
;br


;^C
$ ls
EF6E286DDA85EA2A4BA7DE684E2C6E8793298290.asc
tor-browser-linux-x86_64-14.0.6.tar.xz
tor-browser-linux-x86_64-14.0.6.tar.xz.asc
;$C
;br

A chave pÃºblica tambÃ©m Ã© geralmente um arquivo .asc que pode ser lido:
;br


;^C
$ head EF6E286DDA85EA2A4BA7DE684E2C6E8793298290.asc
-----BEGIN PGP PUBLIC KEY BLOCK-----
Comment: EF6E 286D DA85 EA2A 4BA7  DE68 4E2C 6E87 9329 8290
Comment: Tor Browser Developers (signing key) <torbrowser@torpro

xsFNBFSOr7oBEADQMs+Q5cAshRhj3YkKgCBKyrjFWMZqVhlf9Y3ePtFQ9kFEnYIS
G9rzMhFC6KMXPn9bgg6OBPPUnnJ29UsKvAk+qa8F35R+s0ZXmPRfmv5/6PqxLOn4
G733K67K0/eXYW1mTkz9sjY8u9E3T10JNT0zE/60WihuZGKZQDIqqig0fOsdvdGa
g+srAW91T56kAT+y59VcvqVCQNjS897E3T9hsUNkQNCdOitQcnN8/5VNQUL0SjyD
BV0y5ry+pUt1rnojj82KQ3WzZuD+XsDE+w2JSGqhcqf9b7D6puy1smhCNwZJ9L1l
pJlrCap6YQN8TPFTkf4aFBctxonAdQDDxbON6sPJALc/myPwTVTxD3nJJhv12yft
...
;$C
;br

Esse Ã© o comeÃ§o do arquivo. Ele tem um cabeÃ§alho informando que Ã© uma chave pÃºblica (<mono>ğŸ”“Public Key</mono>) PGP, um comentÃ¡rio, e o conteÃºdo.
;br


Podemos importÃ¡-la com:
;br


;^C
$ gpg --import EF6E286DDA85EA2A4BA7DE684E2C6E8793298290.asc
gpg: key 4E2C6E8793298290: 2 signatures not checked due to missing keys
gpg: key 4E2C6E8793298290: public key "Tor Browser Developers (signing key) <torbrowser@torproject.org>" imported
gpg: Total number processed: 1
gpg:               imported: 1
gpg: marginals needed: 3  completes needed: 1  trust model: pgp
gpg: depth: 0  valid:   3  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 3u
gpg: next trustdb check due at 2027-02-10
;$C
;br

A chave estÃ¡ importada no seu keyring. Keyring (chaveiro) Ã© o nome que se dÃ¡ para seu conjunto de chaves.
;br

VocÃª pode ver todas as suas chaves com:
;br


;^C
$ gpg --fingerprint
/home/anon/.gnupg/pubring.kbx
-----------------------------
pub   rsa4096 2014-12-15 [C] [expires: 2027-07-15]
      EF6E 286D DA85 EA2A 4BA7  DE68 4E2C 6E87 9329 8290
uid           [ unknown] Tor Browser Developers (signing key) <torbrowser@torproject.org>
sub   rsa4096 2024-07-15 [S] [expires: 2026-10-26]
;$C
;br

Agora vocÃª pode verificar os arquivos? NÃ£o.
Como sabemos se essa chave Ã© confiÃ¡vel? E se alguÃ©m hackeou o site do Tor e colocou lÃ¡ um link para uma chave fraudulenta?
;br


;h 4. Verifique em VÃRIOS lugares se a <mono>ğŸ”“Public Key</mono> Ã© mesmo confiÃ¡vel, checando o <mono>fingerprint</mono>
Cada <mono>ğŸ”“Public Key</mono> tem um <mono>fingerprint</mono> Ãºnico. No caso da chave que importamos, o <mono>fingerprint</mono> Ã© EF6E 286D DA85 EA2A 4BA7  DE68 4E2C 6E87 9329 8290, como pudemos ver no comando acima.
;br


NÃ£o Ã© sÃ³ porque estÃ¡ no keyserver que Ã© confiÃ¡vel. Qualquer um pode subir uma chave lÃ¡.
O que eu faÃ§o Ã© pesquisar na internet "what is Tor public key fingerprint" e geralmente eu encontro alguma postagem em fÃ³runs citando o <mono>fingerprint</mono>. TambÃ©m vale olhar tutoriais de pessoas checando a <mono>ğŸ”assinatura</mono> no youtube e checar se o <mono>fingerprint</mono> bate. 
;br

Convenhamos, o hacker teria que forjar vÃ­deos do Youtube, posts em fÃ³runs, hackear o site do Tor e mais um monte de coisas para fazer essa fraude. Se vocÃª encontra a <mono>fingerprint</mono> em posts na internet que estÃ£o lÃ¡ hÃ¡ anos e com centenas de comentÃ¡rios sem ninguÃ©m apontar que ela Ã© falsa, vocÃª pode ter quase 100% de certeza que Ã© a chave real. Outra forma Ã© a web of trust, mas isso daria um post inteiro e nÃ£o Ã© introdutÃ³rio.
;br

Achei esse post no reddit ;url "https://www.reddit.com/r/TOR/comments/s25eoq/cant_check_signature_no_public_key/?rdt=34735" "https://www.reddit.com/r/TOR/comments/s25eoq/cant_check_signature_no_public_key/?rdt=34735" de 3 anos atrÃ¡s e a <mono>ğŸ”“Public Key</mono> tem a mesma <mono>fingerprint</mono> da que baixei, entÃ£o me sinto seguro que a chave Ã© real.
;br

A parte mais especial foi esta: baixar a <mono>ğŸ”“Public Key</mono> correta e verificar se ela Ã© confiÃ¡vel.
;br


;h 5. Verifique a integridade e a autenticidade do arquivo baixado usando GPG
Agora Ã© sÃ³ usar o comando na <mono>ğŸ”assinatura</mono> .asc:
;br

;^C
$ gpg --verify tor-browser-linux-x86_64-14.0.6.tar.xz.asc
gpg: assuming signed data in 'tor-browser-linux-x86_64-14.0.6.tar.xz'
gpg: Signature made Fri 07 Feb 2025 02:17:14 PM -03
gpg:                using RSA key CAAE408AEBE2288E96FC5D5E157432CF78A65729
gpg: Good signature from "Tor Browser Developers (signing key) <torbrowser@torproject.org>" [unknown]
gpg: WARNING: This key is not certified with a trusted signature!
gpg:          There is no indication that the signature belongs to the owner.
Primary key fingerprint: EF6E 286D DA85 EA2A 4BA7  DE68 4E2C 6E87 9329 8290
     Subkey fingerprint: CAAE 408A EBE2 288E 96FC  5D5E 1574 32CF 78A6 5729
;$C
;br

O resultado foi <i><green>Good signature</green></i>. Isso significa que a <mono>ğŸ”assinatura</mono> bate com o arquivo - arquivo estÃ¡ integro e nÃ£o foi alterado - e bate com a <mono>ğŸ”“Public Key</mono> - <mono>ğŸ”assinatura</mono> Ã© autÃªntica a foi feita pela chave dos desenvolvedores do Tor que vocÃª baixou. A sua parte nisso tudo Ã© checar o <mono>fingerprint</mono> a ter certeza de que baixou uma chave confiÃ¡vel.
;br

Se vocÃª nÃ£o teve o resultado "Good signature", nÃ£o use o software. 
;br

Ã‰ extremamente simples fazer uma verificaÃ§Ã£o dessas. VocÃª sÃ³ precisou de dois comandos, um pra importar e chave e outro para verificar.
A parte principal Ã© baixar os arquivos corretos. 
Lembre-se: 
<ul>
;li Geralmente <mono>ğŸ”assinaturas</mono> e <mono>ğŸ”“Public Keys</mono> sÃ£o arquivos de texto terminados em .asc. Mas tambÃ©m podem ser arquivos binÃ¡rios terminados em .gpg. TambÃ©m ocorrem com a extensÃ£o .sig. Elas sÃ£o distribuidas junto com o software.
;li Geralmente as pessoas deixam suas <mono>fingerprints</mono> e vÃ¡rios lugares da internet, como redes sociais, sites pessoais, etc, para os outros encontrarem e verificarem. Sempre procure em mais de um lugar.
;li Uma <mono>fingerprint</mono> se parece com isso: EF6E 286D DA85 EA2A 4BA7 DE68 4E2C 6E87 9329 8290.
</ul>
;br

;H Mais um exemplo, baixando e verificando a carteira Electrum
Vamos fazer mais uma vez para consolidar.
;br

O primeiro cuidado Ã© verificar se estÃ¡ entrando no site correto. A URL do site da carteira electrum Ã© ;url "https://electrum.org/" "https://electrum.org/". 
SEMPRE olhe a URL para nÃ£o entrar em sites falsos!
;br

VÃ¡ em downloads e baixe o software. Eu irei baixar o appimage para Linux como exemplo.
;br

;^C
$ ls
electrum-4.5.8-x86_64.AppImage
;$C
;br

Procure pela <mono>ğŸ”assinatura</mono> do arquivo. 
No caso do Electrum, clique em "signatures" ao lado do arquivo que vocÃª baixou.
;br

;^C
$ ls
electrum-4.5.8-x86_64.AppImage
electrum-4.5.8-x86_64.AppImage.asc
;$C
;br

NÃ³s temos o software e a <mono>ğŸ”assinatura</mono> .asc, mas nÃ£o temos a <mono>ğŸ”“Public Key</mono> do signatÃ¡rio.
;br

O que acontece se tentarmos verificar mesmo assim?
;br

;^C
$ gpg --verify electrum-4.5.8-x86_64.AppImage.asc
gpg: assuming signed data in 'electrum-4.5.8-x86_64.AppImage'
gpg: Signature made Wed 23 Oct 2024 04:13:28 AM -03
gpg:                using RSA key 637DB1E23370F84AFF88CCE03152347D07DA627C
gpg: Can't check signature: No public key
gpg: Signature made Wed 23 Oct 2024 03:03:11 AM -03
gpg:                using RSA key 0EEDCFD5CAFB459067349B23CA9EEEC43DF911DC
gpg: Can't check signature: No public key
gpg: Signature made Wed 23 Oct 2024 12:26:58 AM -03
gpg:                using RSA key 6694D8DE7BE8EE5631BED9502BD5824B7F9470E6
gpg: Can't check signature: No public key
;$C
;br

A saÃ­da mostra que o arquivo foi assinado por trÃªs chaves diferentes e exibe os <mono>fingerprints</mono> de cada chave. Para as trÃªs tivemos o resultado 'No public key'.
O GPG automaticamente procurou  pelas chaves que possuem esses <mono>fingerprints</mono> no nosso keyring, mas nÃ£o as encontrou.
;br

Agora vamos voltar ao site e procurar pelas chaves. LÃ¡ estÃ¡ escrito: <i>The current executables have been signed by ThomasV, SomberNight, Emzy.</i>
Baixamos a chave do ThomasV que estÃ¡ em ;url "https://raw.githubusercontent.com/spesmilo/electrum/master/pubkeys/ThomasV.asc" "https://raw.githubusercontent.com/spesmilo/electrum/master/pubkeys/ThomasV.asc" e importamos.
;br

Mas antes de usar essa chave, precisamos confiar nela. Pesquisando na internet, encontrei vÃ¡rios posts de fÃ³runs com a <mono>fingerprint</mono> batendo.
Tem tambÃ©m ;url "https://www.youtube.com/watch?v=hjYCXOyDy7Y" "um vÃ­deo no youtube" onde o ThomasV aparece ao lado de sua <mono>fingerprint</mono> em uma palestra.
;br

EntÃ£o essa Ã© mesmo a <mono>fingerprint</mono> da <mono>ğŸ”“Public Key</mono> dele. Podemos continuar.
;br

;^C
$ ls
electrum-4.5.8-x86_64.AppImage  electrum-4.5.8-x86_64.AppImage.asc  ThomasV.asc
;$C
;br

;^C
$ gpg --import ThomasV.asc
gpg: key 2BD5824B7F9470E6: public key "Thomas Voegtlin (https://electrum.org) <thomasv@electrum.org>" imported
gpg: Total number processed: 1
gpg:               imported: 1
;$C
;br

Verificamos novamente com o mesmo comando de antes:
;br

;^C
$ gpg --verify electrum-4.5.8-x86_64.AppImage.asc
gpg: assuming signed data in 'electrum-4.5.8-x86_64.AppImage'
gpg: Signature made Wed 23 Oct 2024 04:13:28 AM -03
gpg:                using RSA key 637DB1E23370F84AFF88CCE03152347D07DA627C
gpg: Can't check signature: No public key
gpg: Signature made Wed 23 Oct 2024 03:03:11 AM -03
gpg:                using RSA key 0EEDCFD5CAFB459067349B23CA9EEEC43DF911DC
gpg: Can't check signature: No public key
gpg: Signature made Wed 23 Oct 2024 12:26:58 AM -03
gpg:                using RSA key 6694D8DE7BE8EE5631BED9502BD5824B7F9470E6
gpg: Good signature from "Thomas Voegtlin (https://electrum.org) <thomasv@electrum.org>" [unknown]
gpg:                 aka "ThomasV <thomasv1@gmx.de>" [unknown]
gpg:                 aka "Thomas Voegtlin <thomasv1@gmx.de>" [unknown]
gpg: WARNING: This key is not certified with a trusted signature!
gpg:          There is no indication that the signature belongs to the owner.
Primary key fingerprint: 6694 D8DE 7BE8 EE56 31BE  D950 2BD5 824B 7F94 70E6
;$C
;br

O resultado Ã© <i>Good signature from...</i> e a <mono>ğŸ”“Public Key</mono> que o GPG encontrou em nosso keyring.
Note que este arquivo foi assinado por trÃªs chaves, e conseguimos o <i>Good signature</i> em uma delas. 
O ideal Ã© que vocÃª importe as outras duas chaves e consiga verificar nas trÃªs, assim terÃ¡ mais seguranÃ§a.
;br

;H Verificando mensagens
SÃ³ para finalizar, vocÃª tambÃ©m pode verificar mensagens de texto da mesmÃ­ssima forma.
;br

Eu escrevi uma mensagem que vocÃª pode baixar ;url "../../files/mensagem-exemplo-gpg.txt" "aqui".
A <mono>ğŸ”assinatura</mono> da mensagem estÃ¡ ;url "../../files/mensagem-exemplo-gpg.txt.asc" "aqui".
Minha <mono>ğŸ”“Public Key</mono> estÃ¡ ;url "../../files/sdf-public-key.asc" "aqui".
A <mono>fingerprint</mono> estÃ¡ na home deste blog.
;br

Como exercÃ­cio, tente verificar a mensagem. SÃ³ para ficar claro que nÃ£o serve apenas para softwares.
Depois tente editar o arquivo .txt e verifique novamente para ver o que acontece. VocÃª vai ter um <i><red>BAD signature</red></i>, pois o arquivo foi alterado e nÃ£o estÃ¡ mais Ã­ntegro.
;br

O exemplo acima funciona, mas nÃ£o Ã© ideal. Quando sÃ£o softwares vocÃª precisa de uma <mono>ğŸ”assinatura</mono> separada, dois arquivos, mas se Ã© apenas texto, um arquivo sÃ³ basta. Quando eu criei a <mono>ğŸ”assinatura</mono> acima, usei a opÃ§Ã£o de separar a <mono>ğŸ”assinatura</mono> do arquivo de texto, mas no prÃ³ximo exemplo eu deixei tudo em um arquivo sÃ³:
;br

Arquivo de texto com a mensagem e a <mono>ğŸ”assinatura</mono> juntos  ;url "../../files/mensagem-exemplo-gpg-embutido.txt.asc" "aqui".
;br

;^C
$ cat mensagem-exemplo-gpg-embutido.txt.asc
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

Mensagem de exemplo.
Qualquer um pode lÃª-la, mas vocÃª deve verificar a autÃªnticidade.
A assinatura estÃ¡ embutida neste arquivo, entÃ£o vocÃª nÃ£o precisa de dois arquivos!
-----BEGIN PGP SIGNATURE-----

iQJGBAEBCgAwFiEEt1revGyMW4nDIhcST7Ayfa9JsiwFAmfB0yISHHNkZl9ib3hA
cHJvdG9uLm1lAAoJEE+wMn2vSbIsly4QAIyaX4WTbIoxDDm18X7SW+jZ8vSms//Z
i6CqJShEHKYhR8wUlYxBDeKRc/roKMtrKKJrEZfJ1rHeAE6/YcLKiSXI9ayWthVU
...
;$C
;br

Tente verificar normalmente. Brinque com a ferramenta. Se divirta.
;br

;H SÃ³ mais uma verificaÃ§Ã£o... a Ãºltima, eu prometo...
Tem uma situaÃ§Ã£o que Ã© um pouco diferente do que jÃ¡ mostrei. Em essÃªncia Ã© a mesma coisa, mas tem um detalhe a mais.
SÃ£o situaÃ§Ãµes onde a <mono>ğŸ”assinatura</mono> Ã© indireta, vocÃª jÃ¡ vai entender.
;br

Um exemplo dessa situaÃ§Ã£o Ã© quando verificamos o ;url "https://linuxmint.com/" "Linux Mint".
Aqui nÃ³s vamos baixar trÃªs arquivos, alÃ©m da <mono>ğŸ”“Public Key</mono>:
<ol>
;li O software;
;li um arquivo .txt com <mono>ğŸ§¬hashes</mono>;
;li e a <mono>ğŸ”assinatura</mono> desse arquivo .txt.
</ol>
A diferenÃ§a aqui Ã© que a <mono>ğŸ”assinatura</mono> assina o arquivo .txt com os <mono>ğŸ§¬hashes</mono>, e nÃ£o o software. JÃ¡ o arquivo .txt tem os <mono>ğŸ§¬hash</mono> do software.
Ou seja, Ã© uma <mono>ğŸ”assinatura</mono> indireta.
;br

;h Integridade e <mono>ğŸ§¬hashes</mono>
O que Ã© um <mono>ğŸ§¬hash</mono>? Ã‰ bem simples, um algorÃ­timo de <mono>ğŸ§¬hash</mono> pega uma informaÃ§Ã£o e gera outra informaÃ§Ã£o a partir dela.
Por exemplo, usando o algorÃ­timo sha256 e inserindo nele a mensagem "sdf", o resultado serÃ¡: 
18ee24150dcb1d96752a4d6dd0f20dfd8ba8c38527e40aa8509b7adecf78f9c6.
;br 

Esse resultado Ã© um <mono>ğŸ§¬hash</mono>. No caso, o <mono>ğŸ§¬hash</mono> da mensagem "sdf". 
E <i>apenas</i> o <mono>ğŸ§¬hash</mono> da mensagem "sdf". Nenhuma outra mensagem terÃ¡ esse mesmo <mono>ğŸ§¬hash</mono>.
Um <mono>ğŸ§¬hash</mono>, apesar de conter letras, Ã© um nÃºmero muito alto, representado em ;url "https://pt.wikipedia.org/wiki/Sistema_de_numera%C3%A7%C3%A3o_hexadecimal" "hexadecimal".
;br

E daÃ­?
<ol>
;li Se eu rodar o mesmo algorÃ­tmo com a mesma mensagem, resultarÃ¡ SEMPRE o mesmo <mono>ğŸ§¬hash</mono>. Esse <mono>ğŸ§¬hash</mono> NÃƒO Ã© aleatÃ³rio, a mesma mensagem sempre gerarÃ¡ o mesmo resultado quando inserido no sha256.
;li Se eu mudar uma letra da mensagem, o resultado serÃ¡ outro nÃºmero, completamente diferente.
;li Ã‰ um nÃºmero tÃ£o alto, mas tÃ£o alto, que Ã© IMPOSSÃVEL duas mensagens gerarem o mesmo nÃºmero.
;li E Ã© tambÃ©m impossÃ­vel eu <i>escolher</i> esse nÃºmero pelas razÃµes acima. NÃ£o Ã© possÃ­vel eu mexer na mensagem para gerar o nÃºmero que quero.
</ol>
Por isso a saÃ­da de um algorÃ­timo de <mono>ğŸ§¬hash</mono> Ã© um nÃºmero Ãºnico que sÃ³ aquele arquivo tem, se eu alterar o arquivo essa saÃ­da mudarÃ¡ para algo totalmente diferente e imprevissÃ­vel.
;br

Hashes servem para GARANTIR a INTEGRIDADE de um arquivo.
EntÃ£o, ao invÃ©s de assinar o arquivo, posso assinar o <mono>ğŸ§¬hash</mono> do arquivo.
;br

EntÃ£o vocÃª pode verificar o <mono>ğŸ§¬hash</mono> ao invÃ©s do arquivo, e depois ver se o <mono>ğŸ§¬hash</mono> bate com o arquivo.
;br

Voltando ao Mint, temos os arquivos:
;^C
$ ls
linuxmint-22.1-xfce-64bit.iso  sha256sum.txt  sha256sum.txt.gpg
;$C
;br

O conteÃºdo do arquivo sha256sum.txt Ã©:
;^C
$ cat sha256sum.txt
ccf482436df954c0ad6d41123a49fde79352ca71f7a684a97d5e0a0c39d7f39f *linuxmint-22.1-cinnamon-64bit.iso
d286306d0f40bd7268f08c523ece5fba87c0369a27a72465a19447e3606c5fa0 *linuxmint-22.1-mate-64bit.iso
6451496af35e6855ffe1454f061993ea9cb884d2b4bc8bf17e7d5925ae2ae86d *linuxmint-22.1-xfce-64bit.iso
;$C
;br

Na esquerda estÃ£o os <mono>ğŸ§¬hashes</mono> e na direita o nome do arquivo que o gerou. 
Precisamos gerar o <mono>ğŸ§¬hash</mono> do nosso arquivo usando o algorÃ­timo sha256 e ele precisa ser identico ao <mono>ğŸ§¬hash</mono> que estÃ¡ na lista.
;br

Usei o comando sha256sum:
;^C
 $ sha256sum linuxmint-22.1-xfce-64bit.iso
6451496af35e6855ffe1454f061993ea9cb884d2b4bc8bf17e7d5925ae2ae86d  linuxmint-22.1-xfce-64bit.iso
;$C
;br

Note que o <mono>ğŸ§¬hash</mono> Ã© idÃªntico. O <mono>ğŸ§¬hash</mono> no arquivo sha256sum.txt Ã© realmente o <mono>ğŸ§¬hash</mono> do arquivo que baixamos.
Agora sÃ³ precisamos verificar o arquivo sha256sum.txt, pois ele representa nosso software, como confirmamos ao comparar com o <mono>ğŸ§¬hash</mono> que nÃ³s mesmos geramos.
;br

Agora Ã© sÃ³ verificar o arquivo sha256sum.txt para sabermos se ele Ã© autÃªntico. Eu jÃ¡ tenho a <mono>ğŸ”“Public Key</mono> do Linux Mint aqui.
;^C
 $ gpg --verify sha256sum.txt.gpg sha256sum.txt
gpg: Signature made Tue 14 Jan 2025 08:35:18 AM -03
gpg:                using RSA key 27DEB15644C6B3CF3BD7D291300F846BA25BAE09
gpg: Good signature from "Linux Mint ISO Signing Key <root@linuxmint.com>" [unknown]
gpg: WARNING: This key is not certified with a trusted signature!
gpg:          There is no indication that the signature belongs to the owner.
Primary key fingerprint: 27DE B156 44C6 B3CF 3BD7  D291 300F 846B A25B AE09
;$C
;br

<i><green>Good signature</green></i>, deu certo.
;br

Ã‰ um mÃ©todo um pouco diferente, um passo a mais, mas Ã© a mesma lÃ³gica de antes. 
Por que Ã© feito assim? NÃ£o faÃ§o ideia. Talvez seja porque o arquivo Ã© grande e demoraria para verificar, entÃ£o se usa o <mono>ğŸ§¬hash</mono> que Ã© menor. Mas nÃ£o sei se Ã© por isso.
;br

;H Concluindo
O PGP/GPG serve para garantir que vocÃª baixou o software da pessoa certa, nÃ£o que a pessoa Ã© honesta.
NÃ³s testamos o Electrum e temos certeza que veio do Thomas Voegtlin, mas isso nÃ£o garante que o Thomas seja honesto.
;br

Estamos confiando que o arquivo veio dele por causa do GPG, mas estamos confiando NELE por causa de sua <b>reputaÃ§Ã£o</b>. E tambÃ©m porque Ã© um software de cÃ³digo aberto. A carteira Electrum Ã© uma das mais tradicionais e estÃ¡ sendo usada desde 2011. NÃ£o vÃ¡ sair baixando coisas desenvolvidas por um cara aleatÃ³rio na internet que ninguÃ©m conhece. Usei a Electrum como exemplo, mas isso se aplica a tudo.
;br

Ã‰ a primeira vez que tento escrever uma explicaÃ§Ã£o e nÃ£o sei se fui tÃ£o claro assim. Acabei escrevendo demais porque queria explicar tudo em detalhes para todos entenderem. Qualquer dÃºvida ou sugestÃ£o de alteraÃ§Ã£o ou correÃ§Ã£o, usem os comentÃ¡rios ou o e-mail.

<!--ARTICLE-IS-SIGNED--> 
<!--^Manual de GPG para falhos: verificando downloads^1740596997^ğŸ”^NEVER^defaults^aa511157bebdf71487698a7315a16f878d148444e52d48adc923fda4059baee4^ <div>Saindo da Falha<br> Bloco 885446 (26/02/2025 16:09 quarta-feira) (â›…ï¸ 31Â°C CÃ©u com nuvens) 1â‚¿ valia $84200, Network fee: 7sat/vB.</div>^pgp gpg linux autocustÃ³dia criptografia tech^-->

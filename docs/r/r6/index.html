<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0">
<title>SDF: Manual de GPG para falhos: verificando downloads</title>
<link rel="stylesheet" href="../../root.css" id="css-root-theme" data="../../"> 
<link rel="stylesheet" href="../../main.css"> 
<link rel="icon" type="image/x-icon" href="../../files/favicon.ico">
</head>
<body>
<div class="website-container">

   <!-- header -->
   <header class="banner-container">
      <a href="../../index.html">
         <div class="banner">
            <h1 class="site-name">Saindo da Falha</h1>
            <h2 class="motd"></h2>
         
         </div>
      </a>
   </header>

   <!-- top nav -->
   <nav class="block top-nav">   
         <span class="nav-section mini-logo" style="visibility: visible"> <span class="nav-link" style="cursor: default">Manual de GPG para falhos: verificando downloads</span> </span> <span class="nav-section"> <a class="nav-link" href="../../index.html">ğŸ¡Home</a> <a class="nav-link" href="../../rss.xml" target="_blank">ğŸ“¢RSS</a> <!--<a class="nav-link" href="../../index.html#contact">[Contato]</a> --> <a class="nav-link" href="../../r/chat/index.html">ğŸ’¬Chat</a> <span class="nav-link" id="toggle-light-dark-theme"> <span onclick="lightTheme()">â˜€ï¸Light</span> </span> <!--- <a class="nav-link" href="mailto:sdf_box@proton.me">ğŸ“ªE-mail</a> --> <!-- <a class="nav-link" href="../../r/journal/index.html">ğŸ“°Journal</a> --> </span> <script> function lightTheme() { const fileDirBase = document.getElementById('css-root-theme').getAttribute('data'); document.getElementById('css-root-theme').setAttribute('href', fileDirBase + 'files/root-minimal-light.css'); localStorage.setItem('sdf-theme', 'minimal-light'); document.getElementById('toggle-light-dark-theme').innerHTML = '<span onclick="defaultTheme()">ğŸŒ’Dark</span>'; } function defaultTheme() { const fileDirBase = document.getElementById('css-root-theme').getAttribute('data'); document.getElementById('css-root-theme').setAttribute('href', fileDirBase + 'root.css'); localStorage.setItem('sdf-theme', 'default'); document.getElementById('toggle-light-dark-theme').innerHTML = '<span onclick="lightTheme()">â˜€ï¸Light</span>'; } if (localStorage.getItem('sdf-theme') == 'minimal-light') {lightTheme()}; </script>
   </nav>

   <!-- main page container-->
   <div class="blocks-container">
      
      <!-- main page, posts, content, etc -->
      <main class="block main-block">
         
<article class="page">
   <h1 id="post-title">Manual de GPG para falhos: verificando downloads</h1>
   <br id="page-hr-separator-top">
   <p>Quero fazer umas postagens sobre autocustÃ³dia de Bitcoin no futuro, mas saber como verficar arquivos com GPG Ã© um prÃ©-requisito e por isso escrevi esta explicaÃ§Ã£o simples e introdutÃ³ria sobre GPG. Vou explicar aqui apenas o mÃ­nimo que vocÃª precisa saber.</p>
<br>
<h2>Criptografia AssimÃ©trica</h2>
<p>GPG ou GnuPG Ã© uma ferramenta de criptografia simÃ©trica e assimÃ©trica. O que interessa para nÃ³s Ã© a assimÃ©trica. Que porra Ã© isso?</p>
<p>Diferente da criptografia simÃ©trica, que se usa uma senha para criptografar dados, a assimÃ©trica usa duas chaves, a chave privada ou secreta e a chave pÃºblica. Vou me referir a elas como <mono>ğŸ”‘Secret Key</mono> (ou <i>private key</i>) e <mono>ğŸ”“Public Key</mono> a partir de agora.</p>
<br>
<p>NÃ£o vou me aprofundar, mas os conceitos principais que vocÃª tem que entender sÃ£o:</p>
<ol>
<li>A <mono>ğŸ”‘Secret Key</mono> Ã© criada aleatoriamente e a <mono>ğŸ”“Public Key</mono> Ã© gerada a partir da <mono>ğŸ”‘Secret Key</mono>.</li>
<li>Como dito no item 1, vocÃª pode descobrir qual Ã© a <mono>ğŸ”“Public Key</mono> se tiver a <mono>ğŸ”‘Secret Key</mono>.</li>
<li>VocÃª NÃƒO pode descobrir a <mono>ğŸ”‘Secret Key</mono> a partir da <mono>ğŸ”“Public Key</mono>.</li>
<li>A <mono>ğŸ”“Public Key</mono> Ã© pÃºblica e vocÃª mostra para todo mundo, estampa na camiseta, faz uma tatuagem, etc...</li>
<li>A <mono>ğŸ”‘Secret Key</mono> Ã© SECRETA, PRIVADA, e se vocÃª deixar vazar vocÃª se lascou.</li>
</ol>
<h3>E o mais importante: </h3>
<p>1. Uma mensagem* encriptada pela <mono>ğŸ”“Public Key</mono> sÃ³ pode ser decriptada pela <mono>ğŸ”‘Secret Key</mono> associada.</p>
<p>2. Uma mensagem* encriptada pela <mono>ğŸ”‘Secret Key</mono> sÃ³ pode ser decriptada pela <mono>ğŸ”“Public Key</mono> associada.</p>
<p>*= entenda <i>mensagem</i> como dado, informaÃ§Ã£o, arquivo, etc...</p>
<br>
<h2>Usos do GPG</h2>
<p>VocÃª pode usar GPG para basicamente duas coisas:</p>
<ol>
<li>Encriptar mensagens usando a <mono>ğŸ”“Public Key</mono> do destinatÃ¡rio, ele usarÃ¡ a <mono>ğŸ”‘Secret Key</mono> dele para decriptar.</li>
<li>Encriptar mensagens usando sua prÃ³pria <mono>ğŸ”‘Secret Key</mono>, de forma que qualquer um que tenha sua <mono>ğŸ”“Public Key</mono> possa decriptar.</li>
</ol> 
<p>Leia novamente o item 2 e pense sobre isso. Se todos conhecem minha <mono>ğŸ”“Public Key</mono>, todos podem decriptar uma mensagem assinada pela minha <mono>ğŸ”‘Secret Key</mono>. </p>
<p>Qual Ã© a utilidade de encriptar uma mensagem que todos podem decriptar?</p>
<p>Ã‰ Ãºtil porque se eles conseguem decriptar a mensagem com sua <mono>ğŸ”“Public Key</mono>, entÃ£o ela, a mensagem, com certeza foi encriptada com sua <mono>ğŸ”‘Secret Key</mono>.</p>
<p>Ou seja, vocÃª pode usar essa caracterÃ­stica para assinar uma mensagem, gerar uma assinatura digital.</p>
<br>
<h3>O que Ã© assinar uma mensagem?</h3>
<p>Assinar uma mensagem Ã© encriptÃ¡-la com sua <mono>ğŸ”‘Secret Key</mono> de forma que somente quem tem sua <mono>ğŸ”“Public Key</mono> possa decriptÃ¡-la. </p>
<p>Isso Ã© uma simplificaÃ§Ã£o, mas Ã© uma boa forma de entender.</p>
<br>
<p>E por que Ã© Ãºtil? </p>
<p>Porque isso serve como uma <mono>ğŸ”assinatura</mono>. Quem recebeu a mensagem terÃ¡ a CERTEZA matemÃ¡tica de que aquela mensagem foi assinada com sua <mono>ğŸ”‘Secret Key</mono> e que ela veio de vocÃª - a nÃ£o ser que vocÃª tenha cagado no pau de deixado a <mono>ğŸ”‘Secret Key</mono> vazar.</p>
<br>
<p>Nesse contexto, faria sentido chamar a <mono>ğŸ”‘Secret Key</mono> de <mono>ğŸ”‘Signing Key</mono> e a <mono>ğŸ”“Public Key</mono> de <mono>ğŸ”“Verifying Key</mono>. Chave de assinatura e de verificaÃ§Ã£o. Mas vou continuar com o nome mais padrÃ£o.</p>
<br>
<h3>E o que acontece se eu deixar vazar a <mono>ğŸ”‘Secret Key</mono>?</h3>
<ol>
<li>Qualquer um com sua <mono>ğŸ”‘Secret Key</mono> que tiver acesso a mensagens enviadas para vocÃª (encriptadas na sua <mono>ğŸ”“Public Key</mono>) poderÃ¡ ler todas essas mensagens.</li>
<li>Qualquer um com sua <mono>ğŸ”‘Secret Key</mono> poderÃ¡ assinar mensagens e se passar por vocÃª.</li>
</ol>
<p>Ã‰ assim que criptografia assimÃ©trica funciona. Se ficou confuso, peÃ§o que leia novamente. Ã‰ mais simples do que parece.</p>
<br>
<h2>Como verificar mensagens com GPG</h2>
<p>Em outras palavras, como checar se o software que baixei tem autenticidade e integridade.</p>
<ol>
<li>Autenticidade: se foi assinado com uma <mono>ğŸ”‘Secret Key</mono> que confio.</li>
<li>Integridade: se nÃ£o foi alterado no meio do caminho.</li>
</ol>
<br>
<p>Se vocÃª nÃ£o estiver usando Linux, pesquise na internet como usar o GPG no seu sistema operacional. Mas se vocÃª realmente quiser fazer autocustÃ³dia, use Linux. Windows Ã© muito menos seguro.</p>
<p>NÃ£o somente leia, faÃ§a vocÃª mesmo os passos e pratique para aprender como funciona.</p>
<br>
<p>Para fins de exemplo, nÃ³s vamos baixar e verificar o Tor Browser.</p>
<p>Os passos sÃ£o:</p>
<ol>
<li>Baixe o software.</li>
<li>Baixe a <mono>ğŸ”assinatura</mono>.</li>
<li>Baixe e importe a <mono>ğŸ”“Public Key</mono> do signatÃ¡rio do software.</li>
<li>Verifique em VÃRIOS lugares se a <mono>ğŸ”“Public Key</mono> Ã© mesmo confiÃ¡vel, checando o <mono>fingerprint</mono>.</li>
<li>Verifique a integridade e a autenticidade do arquivo baixado usando GPG.</li>
</ol>
<br>
<h3>1. Baixe o software</h3>
<p>VÃ¡ atÃ© o site do Tor, em <a target="_blank" href="https://www.torproject.org">https://www.torproject.org</a> e baixe. Escolhi a versÃ£o para Linux. </p>
<br>
<h3>2. Baixe a <mono>ğŸ”assinatura</mono></h3>
<p>Procure no site por checksums, signatures, ou algo assim. No caso do Tor, vocÃª encontra <i>Signature</i> abaixo do link de download.</p>
<br>
<div class="code">
<p>$ ls</p>
<p>tor-browser-linux-x86_64-14.0.6.tar.xz</p>
<p>tor-browser-linux-x86_64-14.0.6.tar.xz.asc</p>
</div>
<br>
<p>Geralmente a <mono>ğŸ”assinatura</mono> terÃ¡ o mesmo nome do arquivo, mas com um .asc no final.</p>
<p>Uma <mono>ğŸ”assinatura</mono> pode estar em binÃ¡rio, mas geralmente serÃ¡ um arquivo em texto mesmo e vocÃª pode lÃª-lo:</p>
<br>
<div class="code">
<p>$ cat tor-browser-linux-x86_64-14.0.6.tar.xz.asc</p>
<p>-----BEGIN PGP SIGNATURE-----</p>
<p>iQIzBAABCgAdFiEEyq5AiuviKI6W/F1eFXQyz3imVykFAmemQBoACgkQFXQyz3im</p>
<p>VymtIRAAmWa4evWPVsCOjmhRIxQKsUxLBXjcUrOQkGKWIDfLadSsKaiEQjcF3d6d</p>
<p>dVTWLE7HNmcEbcEczdTGrTAPGccoIBPIHVN1Rk5ij+Ov5xyzBReEto3xTeyEAP25</p>
<p>057jITJR8gHNKnW/1eza+oAvPUOrjD3zTxyD7dTn7NjLaL9HIUNLUy+/2CaH1M1L</p>
<p>xzeNE9MSVP6R8SkEHdQmYbB7CITjthQo3v6owHN7lVn2nx4a3Kg2rbRMDfYqlXOa</p>
<p>Oo+JL8qiN7lHbvvCgSpmTvWsuIRYhYiG8BGttFi3wYOPYQe5ZSRMBp9c+4uTZo9D</p>
<p>JUV8tLPbMic2r0fNL4wQhxR1Jp5P9R0dqf5XsZ+NTo6Ip/cjer2CXKDIff0JnG7T</p>
<p>sO2Ccc6PEcR20vDwotcKcH/HIeyfIuQoqBYwamm+eepYP4rRN+56rknqalPLnWu0</p>
<p>gNMKuw63azuGkyiEEdl4ZAvJpm7z+64Bht/dZPMJ4KplyMytahJokH2kFilvCsKh</p>
<p>6gQbP6Xsh1B1zfyNGCjXMhfx8ciAjul7ocV1S67tt0rfSonWuJUp/h/QdpVoJjOi</p>
<p>d3Vn0az+R6r02qfLflHPxYQKzcpp8Do62b26EZQGScI3/0SFtFm40neXi7zNe2gQ</p>
<p>wohJg7PjntB2nClQPbuWPVBf74t8kH7iDe9El6GhQzv2CSFQ85o=</p>
<p>=q3ol</p>
<p>-----END PGP SIGNATURE-----</p>
</div>
<br>
<p>HÃ¡ um cabeÃ§alho informando que Ã© uma <mono>ğŸ”assinatura</mono> PGP. PGP Ã© o protocolo, GPG Ã© a implementaÃ§Ã£o que estamos usando. NÃ£o se preocupe com isso agora. Esse monte de texto Ã© a <mono>ğŸ”assinatura</mono> em si.</p>
<br>
<p>Temos o arquivo e a <mono>ğŸ”assinatura</mono> .asc, mas nÃ£o podemos verificar porque falta a <mono>ğŸ”“Public Key</mono> do signatÃ¡rio.</p>
<br>
<h3>3. Baixe e importe a <mono>ğŸ”“Public Key</mono> do signatÃ¡rio do software</h3>
<p>Geralmente vocÃª nÃ£o irÃ¡ encontrar a <mono>ğŸ”“Public Key</mono> no mesmo site onde baixou os outros arquivos. Por quÃª? Por seguranÃ§a. Se alguÃ©m hackear o site poderÃ¡ facilmente trocar a <mono>ğŸ”“Public Key</mono> e fazer uma fraude. </p>
<br>
<p>Por isso se deixa a <mono>ğŸ”“Public Key</mono> em outro lugar e por isso vocÃª pesquisa sobre a <mono>fingerprint</mono> da <mono>ğŸ”“Public Key</mono> antes de confiar nela - mais sobre isso abaixo. VocÃª pode encontrar um link para a <mono>ğŸ”“Public Key</mono> ou Ã s vezes nem isso e terÃ¡ que pesquisar. </p>
<br>
<p>No caso do exemplo, abaixando a pÃ¡gina, vocÃª encontra um link: <i>How can I verify Tor Browser signature?</i> e entrando nessa pÃ¡gina eles te explicam como baixar a <mono>ğŸ”“Public Key</mono> para fazer a verificaÃ§Ã£o. </p>
<br>
<p>Abaixo na mesma pÃ¡gina, na seÃ§Ã£o <i>Workaround (using a public key)</i> eles dÃ£o o link para a <mono>ğŸ”“Public Key</mono>: <a target="_blank" href="https://keys.openpgp.org/vks/v1/by-fingerprint/EF6E286DDA85EA2A4BA7DE684E2C6E8793298290">https://keys.openpgp.org/vks/v1/by-fingerprint/EF6E286DDA85EA2A4BA7DE684E2C6E8793298290</a>. O openpgp.org Ã© um keyserver. NÃ£o vou entrar no mÃ©rito de keyservers, mas sÃ£o repositÃ³rios de <mono>ğŸ”“Public Keys</mono> na internet, vocÃª coloca sua <mono>ğŸ”“Public Key</mono> lÃ¡ para as pessoas usarem.</p>
<br>
<div class="code">
<p>$ ls</p>
<p>EF6E286DDA85EA2A4BA7DE684E2C6E8793298290.asc</p>
<p>tor-browser-linux-x86_64-14.0.6.tar.xz</p>
<p>tor-browser-linux-x86_64-14.0.6.tar.xz.asc</p>
</div>
<br>
<p>A chave pÃºblica tambÃ©m Ã© geralmente um arquivo .asc que pode ser lido:</p>
<br>
<div class="code">
<p>$ head EF6E286DDA85EA2A4BA7DE684E2C6E8793298290.asc</p>
<p>-----BEGIN PGP PUBLIC KEY BLOCK-----</p>
<p>Comment: EF6E 286D DA85 EA2A 4BA7  DE68 4E2C 6E87 9329 8290</p>
<p>Comment: Tor Browser Developers (signing key) <torbrowser@torpro</p>
<p>xsFNBFSOr7oBEADQMs+Q5cAshRhj3YkKgCBKyrjFWMZqVhlf9Y3ePtFQ9kFEnYIS</p>
<p>G9rzMhFC6KMXPn9bgg6OBPPUnnJ29UsKvAk+qa8F35R+s0ZXmPRfmv5/6PqxLOn4</p>
<p>G733K67K0/eXYW1mTkz9sjY8u9E3T10JNT0zE/60WihuZGKZQDIqqig0fOsdvdGa</p>
<p>g+srAW91T56kAT+y59VcvqVCQNjS897E3T9hsUNkQNCdOitQcnN8/5VNQUL0SjyD</p>
<p>BV0y5ry+pUt1rnojj82KQ3WzZuD+XsDE+w2JSGqhcqf9b7D6puy1smhCNwZJ9L1l</p>
<p>pJlrCap6YQN8TPFTkf4aFBctxonAdQDDxbON6sPJALc/myPwTVTxD3nJJhv12yft</p>
<p>...</p>
</div>
<br>
<p>Esse Ã© o comeÃ§o do arquivo. Ele tem um cabeÃ§alho informando que Ã© uma chave pÃºblica (<mono>ğŸ”“Public Key</mono>) PGP, um comentÃ¡rio, e o conteÃºdo.</p>
<br>
<p>Podemos importÃ¡-la com:</p>
<br>
<div class="code">
<p>$ gpg --import EF6E286DDA85EA2A4BA7DE684E2C6E8793298290.asc</p>
<p>gpg: key 4E2C6E8793298290: 2 signatures not checked due to missing keys</p>
<p>gpg: key 4E2C6E8793298290: public key "Tor Browser Developers (signing key) <torbrowser@torproject.org>" imported</p>
<p>gpg: Total number processed: 1</p>
<p>gpg:               imported: 1</p>
<p>gpg: marginals needed: 3  completes needed: 1  trust model: pgp</p>
<p>gpg: depth: 0  valid:   3  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 3u</p>
<p>gpg: next trustdb check due at 2027-02-10</p>
</div>
<br>
<p>A chave estÃ¡ importada no seu keyring. Keyring (chaveiro) Ã© o nome que se dÃ¡ para seu conjunto de chaves.</p>
<br>
<p>VocÃª pode ver todas as suas chaves com:</p>
<br>
<div class="code">
<p>$ gpg --fingerprint</p>
<p>/home/anon/.gnupg/pubring.kbx</p>
<p>-----------------------------</p>
<p>pub   rsa4096 2014-12-15 [C] [expires: 2027-07-15]</p>
<p>      EF6E 286D DA85 EA2A 4BA7  DE68 4E2C 6E87 9329 8290</p>
<p>uid           [ unknown] Tor Browser Developers (signing key) <torbrowser@torproject.org></p>
<p>sub   rsa4096 2024-07-15 [S] [expires: 2026-10-26]</p>
</div>
<br>
<p>Agora vocÃª pode verificar os arquivos? NÃ£o.</p>
<p>Como sabemos se essa chave Ã© confiÃ¡vel? E se alguÃ©m hackeou o site do Tor e colocou lÃ¡ um link para uma chave fraudulenta?</p>
<br>
<h3>4. Verifique em VÃRIOS lugares se a <mono>ğŸ”“Public Key</mono> Ã© mesmo confiÃ¡vel, checando o <mono>fingerprint</mono></h3>
<p>Cada <mono>ğŸ”“Public Key</mono> tem um <mono>fingerprint</mono> Ãºnico. No caso da chave que importamos, o <mono>fingerprint</mono> Ã© EF6E 286D DA85 EA2A 4BA7  DE68 4E2C 6E87 9329 8290, como pudemos ver no comando acima.</p>
<br>
<p>NÃ£o Ã© sÃ³ porque estÃ¡ no keyserver que Ã© confiÃ¡vel. Qualquer um pode subir uma chave lÃ¡.</p>
<p>O que eu faÃ§o Ã© pesquisar na internet "what is Tor public key fingerprint" e geralmente eu encontro alguma postagem em fÃ³runs citando o <mono>fingerprint</mono>. TambÃ©m vale olhar tutoriais de pessoas checando a <mono>ğŸ”assinatura</mono> no youtube e checar se o <mono>fingerprint</mono> bate. </p>
<br>
<p>Convenhamos, o hacker teria que forjar vÃ­deos do Youtube, posts em fÃ³runs, hackear o site do Tor e mais um monte de coisas para fazer essa fraude. Se vocÃª encontra a <mono>fingerprint</mono> em posts na internet que estÃ£o lÃ¡ hÃ¡ anos e com centenas de comentÃ¡rios sem ninguÃ©m apontar que ela Ã© falsa, vocÃª pode ter quase 100% de certeza que Ã© a chave real. Outra forma Ã© a web of trust, mas isso daria um post inteiro e nÃ£o Ã© introdutÃ³rio.</p>
<br>
<p>Achei esse post no reddit <a target="_blank" href="https://www.reddit.com/r/TOR/comments/s25eoq/cant_check_signature_no_public_key/?rdt=34735">https://www.reddit.com/r/TOR/comments/s25eoq/cant_check_signature_no_public_key/?rdt=34735</a> de 3 anos atrÃ¡s e a <mono>ğŸ”“Public Key</mono> tem a mesma <mono>fingerprint</mono> da que baixei, entÃ£o me sinto seguro que a chave Ã© real.</p>
<br>
<p>A parte mais especial foi esta: baixar a <mono>ğŸ”“Public Key</mono> correta e verificar se ela Ã© confiÃ¡vel.</p>
<br>
<h3>5. Verifique a integridade e a autenticidade do arquivo baixado usando GPG</h3>
<p>Agora Ã© sÃ³ usar o comando na <mono>ğŸ”assinatura</mono> .asc:</p>
<br>
<div class="code">
<p>$ gpg --verify tor-browser-linux-x86_64-14.0.6.tar.xz.asc</p>
<p>gpg: assuming signed data in 'tor-browser-linux-x86_64-14.0.6.tar.xz'</p>
<p>gpg: Signature made Fri 07 Feb 2025 02:17:14 PM -03</p>
<p>gpg:                using RSA key CAAE408AEBE2288E96FC5D5E157432CF78A65729</p>
<p>gpg: Good signature from "Tor Browser Developers (signing key) <torbrowser@torproject.org>" [unknown]</p>
<p>gpg: WARNING: This key is not certified with a trusted signature!</p>
<p>gpg:          There is no indication that the signature belongs to the owner.</p>
<p>Primary key fingerprint: EF6E 286D DA85 EA2A 4BA7  DE68 4E2C 6E87 9329 8290</p>
<p>     Subkey fingerprint: CAAE 408A EBE2 288E 96FC  5D5E 1574 32CF 78A6 5729</p>
</div>
<br>
<p>O resultado foi <i><green>Good signature</green></i>. Isso significa que a <mono>ğŸ”assinatura</mono> bate com o arquivo - arquivo estÃ¡ integro e nÃ£o foi alterado - e bate com a <mono>ğŸ”“Public Key</mono> - <mono>ğŸ”assinatura</mono> Ã© autÃªntica a foi feita pela chave dos desenvolvedores do Tor que vocÃª baixou. A sua parte nisso tudo Ã© checar o <mono>fingerprint</mono> a ter certeza de que baixou uma chave confiÃ¡vel.</p>
<br>
<p>Se vocÃª nÃ£o teve o resultado "Good signature", nÃ£o use o software. </p>
<br>
<p>Ã‰ extremamente simples fazer uma verificaÃ§Ã£o dessas. VocÃª sÃ³ precisou de dois comandos, um pra importar e chave e outro para verificar.</p>
<p>A parte principal Ã© baixar os arquivos corretos. </p>
<p>Lembre-se: </p>
<p><ul></p>
<li>Geralmente <mono>ğŸ”assinaturas</mono> e <mono>ğŸ”“Public Keys</mono> sÃ£o arquivos de texto terminados em .asc. Mas tambÃ©m podem ser arquivos binÃ¡rios terminados em .gpg. TambÃ©m ocorrem com a extensÃ£o .sig. Elas sÃ£o distribuidas junto com o software.</li>
<li>Geralmente as pessoas deixam suas <mono>fingerprints</mono> e vÃ¡rios lugares da internet, como redes sociais, sites pessoais, etc, para os outros encontrarem e verificarem. Sempre procure em mais de um lugar.</li>
<li>Uma <mono>fingerprint</mono> se parece com isso: EF6E 286D DA85 EA2A 4BA7 DE68 4E2C 6E87 9329 8290.</li>
<p></ul></p>
<br>
<h2>Mais um exemplo, baixando e verificando a carteira Electrum</h2>
<p>Vamos fazer mais uma vez para consolidar.</p>
<br>
<p>O primeiro cuidado Ã© verificar se estÃ¡ entrando no site correto. A URL do site da carteira electrum Ã© <a target="_blank" href="https://electrum.org/">https://electrum.org/</a>. </p>
<p>SEMPRE olhe a URL para nÃ£o entrar em sites falsos!</p>
<br>
<p>VÃ¡ em downloads e baixe o software. Eu irei baixar o appimage para Linux como exemplo.</p>
<br>
<div class="code">
<p>$ ls</p>
<p>electrum-4.5.8-x86_64.AppImage</p>
</div>
<br>
<p>Procure pela <mono>ğŸ”assinatura</mono> do arquivo. </p>
<p>No caso do Electrum, clique em "signatures" ao lado do arquivo que vocÃª baixou.</p>
<br>
<div class="code">
<p>$ ls</p>
<p>electrum-4.5.8-x86_64.AppImage</p>
<p>electrum-4.5.8-x86_64.AppImage.asc</p>
</div>
<br>
<p>NÃ³s temos o software e a <mono>ğŸ”assinatura</mono> .asc, mas nÃ£o temos a <mono>ğŸ”“Public Key</mono> do signatÃ¡rio.</p>
<br>
<p>O que acontece se tentarmos verificar mesmo assim?</p>
<br>
<div class="code">
<p>$ gpg --verify electrum-4.5.8-x86_64.AppImage.asc</p>
<p>gpg: assuming signed data in 'electrum-4.5.8-x86_64.AppImage'</p>
<p>gpg: Signature made Wed 23 Oct 2024 04:13:28 AM -03</p>
<p>gpg:                using RSA key 637DB1E23370F84AFF88CCE03152347D07DA627C</p>
<p>gpg: Can't check signature: No public key</p>
<p>gpg: Signature made Wed 23 Oct 2024 03:03:11 AM -03</p>
<p>gpg:                using RSA key 0EEDCFD5CAFB459067349B23CA9EEEC43DF911DC</p>
<p>gpg: Can't check signature: No public key</p>
<p>gpg: Signature made Wed 23 Oct 2024 12:26:58 AM -03</p>
<p>gpg:                using RSA key 6694D8DE7BE8EE5631BED9502BD5824B7F9470E6</p>
<p>gpg: Can't check signature: No public key</p>
</div>
<br>
<p>A saÃ­da mostra que o arquivo foi assinado por trÃªs chaves diferentes e exibe os <mono>fingerprints</mono> de cada chave. Para as trÃªs tivemos o resultado 'No public key'.</p>
<p>O GPG automaticamente procurou  pelas chaves que possuem esses <mono>fingerprints</mono> no nosso keyring, mas nÃ£o as encontrou.</p>
<br>
<p>Agora vamos voltar ao site e procurar pelas chaves. LÃ¡ estÃ¡ escrito: <i>The current executables have been signed by ThomasV, SomberNight, Emzy.</i></p>
<p>Baixamos a chave do ThomasV que estÃ¡ em <a target="_blank" href="https://raw.githubusercontent.com/spesmilo/electrum/master/pubkeys/ThomasV.asc">https://raw.githubusercontent.com/spesmilo/electrum/master/pubkeys/ThomasV.asc</a> e importamos.</p>
<br>
<p>Mas antes de usar essa chave, precisamos confiar nela. Pesquisando na internet, encontrei vÃ¡rios posts de fÃ³runs com a <mono>fingerprint</mono> batendo.</p>
<p>Tem tambÃ©m <a target="_blank" href="https://www.youtube.com/watch?v=hjYCXOyDy7Y">um vÃ­deo no youtube</a> onde o ThomasV aparece ao lado de sua <mono>fingerprint</mono> em uma palestra.</p>
<br>
<p>EntÃ£o essa Ã© mesmo a <mono>fingerprint</mono> da <mono>ğŸ”“Public Key</mono> dele. Podemos continuar.</p>
<br>
<div class="code">
<p>$ ls</p>
<p>electrum-4.5.8-x86_64.AppImage  electrum-4.5.8-x86_64.AppImage.asc  ThomasV.asc</p>
</div>
<br>
<div class="code">
<p>$ gpg --import ThomasV.asc</p>
<p>gpg: key 2BD5824B7F9470E6: public key "Thomas Voegtlin (https://electrum.org) <thomasv@electrum.org>" imported</p>
<p>gpg: Total number processed: 1</p>
<p>gpg:               imported: 1</p>
</div>
<br>
<p>Verificamos novamente com o mesmo comando de antes:</p>
<br>
<div class="code">
<p>$ gpg --verify electrum-4.5.8-x86_64.AppImage.asc</p>
<p>gpg: assuming signed data in 'electrum-4.5.8-x86_64.AppImage'</p>
<p>gpg: Signature made Wed 23 Oct 2024 04:13:28 AM -03</p>
<p>gpg:                using RSA key 637DB1E23370F84AFF88CCE03152347D07DA627C</p>
<p>gpg: Can't check signature: No public key</p>
<p>gpg: Signature made Wed 23 Oct 2024 03:03:11 AM -03</p>
<p>gpg:                using RSA key 0EEDCFD5CAFB459067349B23CA9EEEC43DF911DC</p>
<p>gpg: Can't check signature: No public key</p>
<p>gpg: Signature made Wed 23 Oct 2024 12:26:58 AM -03</p>
<p>gpg:                using RSA key 6694D8DE7BE8EE5631BED9502BD5824B7F9470E6</p>
<p>gpg: Good signature from "Thomas Voegtlin (https://electrum.org) <thomasv@electrum.org>" [unknown]</p>
<p>gpg:                 aka "ThomasV <thomasv1@gmx.de>" [unknown]</p>
<p>gpg:                 aka "Thomas Voegtlin <thomasv1@gmx.de>" [unknown]</p>
<p>gpg: WARNING: This key is not certified with a trusted signature!</p>
<p>gpg:          There is no indication that the signature belongs to the owner.</p>
<p>Primary key fingerprint: 6694 D8DE 7BE8 EE56 31BE  D950 2BD5 824B 7F94 70E6</p>
</div>
<br>
<p>O resultado Ã© <i>Good signature from...</i> e a <mono>ğŸ”“Public Key</mono> que o GPG encontrou em nosso keyring.</p>
<p>Note que este arquivo foi assinado por trÃªs chaves, e conseguimos o <i>Good signature</i> em uma delas. </p>
<p>O ideal Ã© que vocÃª importe as outras duas chaves e consiga verificar nas trÃªs, assim terÃ¡ mais seguranÃ§a.</p>
<br>
<h2>Verificando mensagens</h2>
<p>SÃ³ para finalizar, vocÃª tambÃ©m pode verificar mensagens de texto da mesmÃ­ssima forma.</p>
<br>
<p>Eu escrevi uma mensagem que vocÃª pode baixar <a target="_blank" href="../../files/mensagem-exemplo-gpg.txt">aqui</a>.</p>
<p>A <mono>ğŸ”assinatura</mono> da mensagem estÃ¡ <a target="_blank" href="../../files/mensagem-exemplo-gpg.txt.asc">aqui</a>.</p>
<p>Minha <mono>ğŸ”“Public Key</mono> estÃ¡ <a target="_blank" href="../../files/sdf-public-key.asc">aqui</a>.</p>
<p>A <mono>fingerprint</mono> estÃ¡ na home deste blog.</p>
<br>
<p>Como exercÃ­cio, tente verificar a mensagem. SÃ³ para ficar claro que nÃ£o serve apenas para softwares.</p>
<p>Depois tente editar o arquivo .txt e verifique novamente para ver o que acontece. VocÃª vai ter um <i><red>BAD signature</red></i>, pois o arquivo foi alterado e nÃ£o estÃ¡ mais Ã­ntegro.</p>
<br>
<p>O exemplo acima funciona, mas nÃ£o Ã© ideal. Quando sÃ£o softwares vocÃª precisa de uma <mono>ğŸ”assinatura</mono> separada, dois arquivos, mas se Ã© apenas texto, um arquivo sÃ³ basta. Quando eu criei a <mono>ğŸ”assinatura</mono> acima, usei a opÃ§Ã£o de separar a <mono>ğŸ”assinatura</mono> do arquivo de texto, mas no prÃ³ximo exemplo eu deixei tudo em um arquivo sÃ³:</p>
<br>
<p>Arquivo de texto com a mensagem e a <mono>ğŸ”assinatura</mono> juntos  <a target="_blank" href="../../files/mensagem-exemplo-gpg-embutido.txt.asc">aqui</a>.</p>
<br>
<div class="code">
<p>$ cat mensagem-exemplo-gpg-embutido.txt.asc</p>
<p>-----BEGIN PGP SIGNED MESSAGE-----</p>
<p>Hash: SHA512</p>
<p>Mensagem de exemplo.</p>
<p>Qualquer um pode lÃª-la, mas vocÃª deve verificar a autÃªnticidade.</p>
<p>A assinatura estÃ¡ embutida neste arquivo, entÃ£o vocÃª nÃ£o precisa de dois arquivos!</p>
<p>-----BEGIN PGP SIGNATURE-----</p>
<p>iQJGBAEBCgAwFiEEt1revGyMW4nDIhcST7Ayfa9JsiwFAmfB0yISHHNkZl9ib3hA</p>
<p>cHJvdG9uLm1lAAoJEE+wMn2vSbIsly4QAIyaX4WTbIoxDDm18X7SW+jZ8vSms//Z</p>
<p>i6CqJShEHKYhR8wUlYxBDeKRc/roKMtrKKJrEZfJ1rHeAE6/YcLKiSXI9ayWthVU</p>
<p>...</p>
</div>
<br>
<p>Tente verificar normalmente. Brinque com a ferramenta. Se divirta.</p>
<br>
<h2>SÃ³ mais uma verificaÃ§Ã£o... a Ãºltima, eu prometo...</h2>
<p>Tem uma situaÃ§Ã£o que Ã© um pouco diferente do que jÃ¡ mostrei. Em essÃªncia Ã© a mesma coisa, mas tem um detalhe a mais.</p>
<p>SÃ£o situaÃ§Ãµes onde a <mono>ğŸ”assinatura</mono> Ã© indireta, vocÃª jÃ¡ vai entender.</p>
<br>
<p>Um exemplo dessa situaÃ§Ã£o Ã© quando verificamos o <a target="_blank" href="https://linuxmint.com/">Linux Mint</a>.</p>
<p>Aqui nÃ³s vamos baixar trÃªs arquivos, alÃ©m da <mono>ğŸ”“Public Key</mono>:</p>
<p><ol></p>
<li>O software;</li>
<li>um arquivo .txt com <mono>ğŸ§¬hashes</mono>;</li>
<li>e a <mono>ğŸ”assinatura</mono> desse arquivo .txt.</li>
<p></ol></p>
<p>A diferenÃ§a aqui Ã© que a <mono>ğŸ”assinatura</mono> assina o arquivo .txt com os <mono>ğŸ§¬hashes</mono>, e nÃ£o o software. JÃ¡ o arquivo .txt tem os <mono>ğŸ§¬hash</mono> do software.</p>
<p>Ou seja, Ã© uma <mono>ğŸ”assinatura</mono> indireta.</p>
<br>
<h3>Integridade e <mono>ğŸ§¬hashes</mono></h3>
<p>O que Ã© um <mono>ğŸ§¬hash</mono>? Ã‰ bem simples, um algorÃ­timo de <mono>ğŸ§¬hash</mono> pega uma informaÃ§Ã£o e gera outra informaÃ§Ã£o a partir dela.</p>
<p>Por exemplo, usando o algorÃ­timo sha256 e inserindo nele a mensagem "sdf", o resultado serÃ¡: </p>
<p>18ee24150dcb1d96752a4d6dd0f20dfd8ba8c38527e40aa8509b7adecf78f9c6.</p>
<br> 
<p>Esse resultado Ã© um <mono>ğŸ§¬hash</mono>. No caso, o <mono>ğŸ§¬hash</mono> da mensagem "sdf". </p>
<p>E <i>apenas</i> o <mono>ğŸ§¬hash</mono> da mensagem "sdf". Nenhuma outra mensagem terÃ¡ esse mesmo <mono>ğŸ§¬hash</mono>.</p>
<p>Um <mono>ğŸ§¬hash</mono>, apesar de conter letras, Ã© um nÃºmero muito alto, representado em <a target="_blank" href="https://pt.wikipedia.org/wiki/Sistema_de_numera%C3%A7%C3%A3o_hexadecimal">hexadecimal</a>.</p>
<br>
<p>E daÃ­?</p>
<p><ol></p>
<li>Se eu rodar o mesmo algorÃ­tmo com a mesma mensagem, resultarÃ¡ SEMPRE o mesmo <mono>ğŸ§¬hash</mono>. Esse <mono>ğŸ§¬hash</mono> NÃƒO Ã© aleatÃ³rio, a mesma mensagem sempre gerarÃ¡ o mesmo resultado quando inserido no sha256.</li>
<li>Se eu mudar uma letra da mensagem, o resultado serÃ¡ outro nÃºmero, completamente diferente.</li>
<li>Ã‰ um nÃºmero tÃ£o alto, mas tÃ£o alto, que Ã© IMPOSSÃVEL duas mensagens gerarem o mesmo nÃºmero.</li>
<li>E Ã© tambÃ©m impossÃ­vel eu <i>escolher</i> esse nÃºmero pelas razÃµes acima. NÃ£o Ã© possÃ­vel eu mexer na mensagem para gerar o nÃºmero que quero.</li>
<p></ol></p>
<p>Por isso a saÃ­da de um algorÃ­timo de <mono>ğŸ§¬hash</mono> Ã© um nÃºmero Ãºnico que sÃ³ aquele arquivo tem, se eu alterar o arquivo essa saÃ­da mudarÃ¡ para algo totalmente diferente e imprevissÃ­vel.</p>
<br>
<p>Hashes servem para GARANTIR a INTEGRIDADE de um arquivo.</p>
<p>EntÃ£o, ao invÃ©s de assinar o arquivo, posso assinar o <mono>ğŸ§¬hash</mono> do arquivo.</p>
<br>
<p>EntÃ£o vocÃª pode verificar o <mono>ğŸ§¬hash</mono> ao invÃ©s do arquivo, e depois ver se o <mono>ğŸ§¬hash</mono> bate com o arquivo.</p>
<br>
<p>Voltando ao Mint, temos os arquivos:</p>
<div class="code">
<p>$ ls</p>
<p>linuxmint-22.1-xfce-64bit.iso  sha256sum.txt  sha256sum.txt.gpg</p>
</div>
<br>
<p>O conteÃºdo do arquivo sha256sum.txt Ã©:</p>
<div class="code">
<p>$ cat sha256sum.txt</p>
<p>ccf482436df954c0ad6d41123a49fde79352ca71f7a684a97d5e0a0c39d7f39f *linuxmint-22.1-cinnamon-64bit.iso</p>
<p>d286306d0f40bd7268f08c523ece5fba87c0369a27a72465a19447e3606c5fa0 *linuxmint-22.1-mate-64bit.iso</p>
<p>6451496af35e6855ffe1454f061993ea9cb884d2b4bc8bf17e7d5925ae2ae86d *linuxmint-22.1-xfce-64bit.iso</p>
</div>
<br>
<p>Na esquerda estÃ£o os <mono>ğŸ§¬hashes</mono> e na direita o nome do arquivo que o gerou. </p>
<p>Precisamos gerar o <mono>ğŸ§¬hash</mono> do nosso arquivo usando o algorÃ­timo sha256 e ele precisa ser identico ao <mono>ğŸ§¬hash</mono> que estÃ¡ na lista.</p>
<br>
<p>Usei o comando sha256sum:</p>
<div class="code">
<p> $ sha256sum linuxmint-22.1-xfce-64bit.iso</p>
<p>6451496af35e6855ffe1454f061993ea9cb884d2b4bc8bf17e7d5925ae2ae86d  linuxmint-22.1-xfce-64bit.iso</p>
</div>
<br>
<p>Note que o <mono>ğŸ§¬hash</mono> Ã© idÃªntico. O <mono>ğŸ§¬hash</mono> no arquivo sha256sum.txt Ã© realmente o <mono>ğŸ§¬hash</mono> do arquivo que baixamos.</p>
<p>Agora sÃ³ precisamos verificar o arquivo sha256sum.txt, pois ele representa nosso software, como confirmamos ao comparar com o <mono>ğŸ§¬hash</mono> que nÃ³s mesmos geramos.</p>
<br>
<p>Agora Ã© sÃ³ verificar o arquivo sha256sum.txt para sabermos se ele Ã© autÃªntico. Eu jÃ¡ tenho a <mono>ğŸ”“Public Key</mono> do Linux Mint aqui.</p>
<div class="code">
<p> $ gpg --verify sha256sum.txt.gpg sha256sum.txt</p>
<p>gpg: Signature made Tue 14 Jan 2025 08:35:18 AM -03</p>
<p>gpg:                using RSA key 27DEB15644C6B3CF3BD7D291300F846BA25BAE09</p>
<p>gpg: Good signature from "Linux Mint ISO Signing Key <root@linuxmint.com>" [unknown]</p>
<p>gpg: WARNING: This key is not certified with a trusted signature!</p>
<p>gpg:          There is no indication that the signature belongs to the owner.</p>
<p>Primary key fingerprint: 27DE B156 44C6 B3CF 3BD7  D291 300F 846B A25B AE09</p>
</div>
<br>
<p><i><green>Good signature</green></i>, deu certo.</p>
<br>
<p>Ã‰ um mÃ©todo um pouco diferente, um passo a mais, mas Ã© a mesma lÃ³gica de antes. </p>
<p>Por que Ã© feito assim? NÃ£o faÃ§o ideia. Talvez seja porque o arquivo Ã© grande e demoraria para verificar, entÃ£o se usa o <mono>ğŸ§¬hash</mono> que Ã© menor. Mas nÃ£o sei se Ã© por isso.</p>
<br>
<h2>Concluindo</h2>
<p>O PGP/GPG serve para garantir que vocÃª baixou o software da pessoa certa, nÃ£o que a pessoa Ã© honesta.</p>
<p>NÃ³s testamos o Electrum e temos certeza que veio do Thomas Voegtlin, mas isso nÃ£o garante que o Thomas seja honesto.</p>
<br>
<p>Estamos confiando que o arquivo veio dele por causa do GPG, mas estamos confiando NELE por causa de sua <b>reputaÃ§Ã£o</b>. E tambÃ©m porque Ã© um software de cÃ³digo aberto. A carteira Electrum Ã© uma das mais tradicionais e estÃ¡ sendo usada desde 2011. NÃ£o vÃ¡ sair baixando coisas desenvolvidas por um cara aleatÃ³rio na internet que ninguÃ©m conhece. Usei a Electrum como exemplo, mas isso se aplica a tudo.</p>
<br>
<p>Ã‰ a primeira vez que tento escrever uma explicaÃ§Ã£o e nÃ£o sei se fui tÃ£o claro assim. Acabei escrevendo demais porque queria explicar tudo em detalhes para todos entenderem. Qualquer dÃºvida ou sugestÃ£o de alteraÃ§Ã£o ou correÃ§Ã£o, usem os comentÃ¡rios ou o e-mail.</p>
<p><!--ARTICLE-IS-SIGNED--> </p>
<p><!--^Manual de GPG para falhos: verificando downloads^1740596997^ğŸ”^NEVER^defaults^aa511157bebdf71487698a7315a16f878d148444e52d48adc923fda4059baee4^ <div>Saindo da Falha<br> Bloco 885446 (26/02/2025 16:09 quarta-feira) (â›…ï¸ 31Â°C CÃ©u com nuvens) 1â‚¿ valia $84200, Network fee: 7sat/vB.</div>^pgp gpg linux autocustÃ³dia criptografia tech^--></p>
   <br>
   <span class="color-weak mono-small"></span>
   <address>
      Saindo da Falha, Wednesday, 26/02/2025 16:09
   </address>
   <span id="page-tags">Tags: <a href='../tags/index.html#tag-autocustÃ³dia'>autocustÃ³dia</a> 
<a href='../tags/index.html#tag-criptografia'>criptografia</a> 
<a href='../tags/index.html#tag-gpg'>gpg</a> 
<a href='../tags/index.html#tag-linux'>linux</a> 
<a href='../tags/index.html#tag-pgp'>pgp</a> 
<a href='../tags/index.html#tag-tech'>tech</a> </span>
   <hr id="page-hr-separator-bottom">
   <h3>ComentÃ¡rios:</h3>
<div id="HCB_comment_box" style="text-align:center"><span style="cursor:pointer;" id="load-comments" onclick="this.innerHTML='Carregando...'">ğŸ’¬ Carregando comentÃ¡rios...</span></div>
<link rel="stylesheet" type="text/css" href="https://www.htmlcommentbox.com/static/skins/bootstrap/twitter-bootstrap.css?v=0" />

<script type="text/javascript" id="hcb">
   document.getElementById("load-comments").addEventListener('click', loadComments);
   function loadComments() {
      if (!window.hcb_user) {
        hcb_user = {};
      }(function() {
        let s = document.createElement("script"),
            l = hcb_user.PAGE || ("" + window.location).replace(/'/g, "%27"),
            h = "https://www.htmlcommentbox.com";
        s.setAttribute("type", "text/javascript");
        s.setAttribute("src", h + "/jread?page=" + encodeURIComponent(l).replace("+", "%2B") + "&mod=%241%24wq1rdBcg%24noOeNoU2cppcTsbYgYRgn%2F" + "&opts=16798&num=10&ts=1734891859180");
        if (typeof s != "undefined") document.getElementsByTagName("head")[0].appendChild(s);
      })(); 
   }
   loadComments() // Carregar automaticamente
</script>

<br>
<p class="color-weak mono-small">Powered by <a href="https://www.htmlcommentbox.com/">HTML Comment Box</a>.</p>
<br>
   <div class="prev-next"> <span><a href="../../index.html">ğŸ¡Home</a></span> </div>
</article>
      </main>

      <!-- side menu, projects, navigation, etc -->
      <aside class="side-blocks">
         
      </aside>
   </div>

   <!-- site footer -->
   <footer>
      <i></i>
   </footer>
</div>
</body>
</html> 

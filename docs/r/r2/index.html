<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0">
<title>SDF: Minha vida √© uma bosta, mas meu rice est√° bonit√£o</title>
<link rel="stylesheet" href="../../root.css" id="css-root-theme" data="../../"> 
<link rel="stylesheet" href="../../main.css"> 
<link rel="icon" type="image/x-icon" href="../../files/favicon.ico">
</head>
<body>
<div class="website-container">

   <!-- header -->
   <header class="banner-container">
      <a href="../../index.html">
         <div class="banner">
            <h1 class="site-name">Saindo da Falha</h1>
            <h2 class="motd"></h2>
         
         </div>
      </a>
   </header>

   <!-- top nav -->
   <nav class="block top-nav">   
         <span class="nav-section mini-logo" style="visibility: visible"> <a class="nav-link" href="../../index.html">Saindo da Falha</a> </span> <span class="nav-section"> <a class="nav-link" href="../../index.html">üè°Home</a> <a class="nav-link" href="../../rss.xml" target="_blank">üì¢RSS</a> <!--<a class="nav-link" href="../../index.html#contact">[Contato]</a> --> <a class="nav-link" href="../../r/chat/index.html">üí¨Chat</a> <!--- <a class="nav-link" href="mailto:sdf_box@proton.me">üì™E-mail</a> --> <!-- <a class="nav-link" href="../../r/journal/index.html">üì∞Journal</a> --> </span> <!-- <span class="nav-section" style="cursor: pointer; visibility: hidden"> <span id="toggle-light-dark-theme"> <span onclick="lightTheme()">‚òÄÔ∏è</span> </span> </span> ---> <!-- js - dark light themes -------------------------------------------------------------------------- <script> function lightTheme() { const fileDirBase = document.getElementById('css-root-theme').getAttribute('data'); document.getElementById('css-root-theme').setAttribute('href', fileDirBase + 'files/root-light.css'); localStorage.setItem('sdf-theme', 'light'); document.getElementById('toggle-light-dark-theme').innerHTML = '<span onclick="defaultTheme()" >üåí</span>'; } function defaultTheme() { const fileDirBase = document.getElementById('css-root-theme').getAttribute('data'); document.getElementById('css-root-theme').setAttribute('href', fileDirBase + 'root.css'); localStorage.setItem('sdf-theme', 'default'); document.getElementById('toggle-light-dark-theme').innerHTML = '<span onclick="lightTheme()" >‚òÄÔ∏è</span>'; } if (localStorage.getItem('sdf-theme')) { if (localStorage.getItem('sdf-theme') == 'light') {lightTheme()}; } </script> -->
   </nav>

   <!-- main page container-->
   <div class="blocks-container">
      
      <!-- main page, posts, content, etc -->
      <main class="block main-block">
         
<article class="page">
   <h1>Minha vida √© uma bosta, mas meu rice est√° bonit√£o</h1>
   <br id="page-hr-separator-top">
   <p>Nada a ver com o assunto principal do blog, mas eu estava para formatar meu computador, como gosto de fazer de tempos em tempos, quando me veio a ideia de que eu deveria "arroizar" meu ambiente desta vez.</p>
<br>
<p>Nunca me preocupei com ricing, eu apenas instalava o dwm com um ou dois patches, n√£o usava nem cores, e deixava de qualquer jeito. Na imagem, o setup que eu usei durante este ano:</p>
<br>
<br> 
<img src="https://raw.githubusercontent.com/saindodafalha/sdf-autorice/refs/heads/master/doc/p-2-old-rice.png" style="width:100%">
<br> 
<br> 
<p>Eu n√£o ligava muito para costumiza√ß√£o de ambiente, apenas instalava, deixava literalmente duas cores no dwm (branco e preto) e usava aquela merda feiosa com terminais pretos de cansar os olhos. O wallpaper √© novidade, a maior parte do ano eu usava um fundo preto. Feio pra caralho e muito b√°sico, pois dwm por si s√≥ n√£o traz quase nada e eu n√£o tinha muitos patches.</p>
<br>
<p>Toda vez que eu instalava um sistema novo eu apenas copiava os dotfiles e instalava essa merda horr√≠vel e sem gra√ßa porque eu tinha pregui√ßa de deixar meu ricing bonit√£o. Mas desta vez foi diferente, agora eu resolvi que iria fazer um ricing LINDO e EFICIENTE, com todos os patches que eu precisava.</p>
<br>
<h2>Regras para o meu novo rice</h2>
<p>Antes de fazer qualquer coisa, eu decidi primeiro o que eu precisava. As regras eram:</p>
<ul>
<li>O ricing seria completamente a n√≠vel de usu√°rio, de forma que eu possa instalar independentemente para v√°rios usu√°rios no meu sistema e ter ambientes completamente diferentes para cada usu√°rio.</li>
<li>Tudo ficaria re√∫nido em um diret√≥rio, de forma organizada.</li>
<li>Tem que ser extremamente f√°cil de instalar. </li>
</ul>
<br>
<h3>Por qu√™?</h3>
<p>Uma das raz√µes √© que eu gosto de ter v√°rios usu√°rios no meu computador pessoal. Um para ficar procrastinando na internet, um para estudos, outro para criptoputarias... tenho at√© um usu√°rio SDF s√≥ para este blog. Se eu instalar, digamos, o dwm a n√≠vel de sistema com <span class="inline-code">sudo make install</span>, o config.def.h √© aplicado para todo o sistema e eu n√£o quero isso. Quero um ambiente diferente para cada usu√°rio. </p>
<br>
<p>A raz√£o para a segunda regra √© por quest√£o de organiza√ß√£o e portabilidade. Com tudo em um √∫nico diret√≥rio eu posso transferir meu ricing facilmente entre sistemas, e, como veremos adiante, eu encontrei um forma muito eficiente de fazer isso usando hardlinks. </p>
<br>
<p>Por fim, eu queria que fosse f√°cil de instalar mesmo quando eu n√£o pudesse transferir meu diret√≥rio $RICE. Por exemplo, eu gosto de brincar com VMs e queria instalar meu ambiente nelas automaticamente, com um comando. Por isso fiz um script de instala√ß√£o.</p>
<br>
<h2>Softwares da suckless e seus patches</h2>
<p>Eu usei o dwm, dmenu, st, slstatus e slock, com os patches:</p>
<ul>
<li>dwm-fullgaps <br> Adiciona lacunas entre as janelas.</li>
<li>dwm-status2d <br> Permite cores na barra de status.</li>
<li>dwm-pertag <br> Faz com que a configura√ß√£o de cada tag seja independente.</li>
<li>dwm-movestack <br> Permite mover uma janela no stack.</li>
<li>dwm-bottomstack <br> Adciona dois novos layouts.</li>
<li>dwm-clientopacity <br> Adiciona opacidade nas janelas focadas e n√£o focadas.</li>
<li>dmenu-center <br> Centraliza o dmenu.</li>
<li>st-alpha <br> Adiciona opacidade ao st.</li>
<li>st-dracula <br> Esquema de cores para o st.</li>
<li>st-scrollback <br> Permite scrollar no st.</li>
<li>st-scrollback-mouse <br> O mesmo, mas com o mouse.</li>
<li>slock-message <br> Mensagem personalizada na tela de bloqueio.</li>
</ul>
<br>
<p>N√£o vou explicar cada um para n√£o escrever demais, voc√™ pode olhar no site da suckless, mas esses patches deixam tudo muito melhor. S√≥ faltou um cfacts que eu ESQUECI e s√≥ lembrei AGORA enquanto escrevo isso, mas foda-se. Vai ficar sem cfacts. </p>
<br>
<p>Fora os softwares da suckless, tamb√©m instalei um sistema de notifica√ß√µes com dunst e notify-send, e uso o xbindkeys para keybindings e o crontab (existe outro?) para automa√ß√£o.</p>
<br>
<h2>Minha conven√ß√£o para o diret√≥rio $RICE</h2>
<p>Criei uma conven√ß√£o para manter tudo organizado:</p>
<div class="code">
<p>Estrutura do diret√≥rio .rice:</p>
<p>- api: scripts que criam ou manipulam arquivos *.dat em $RICE/var</p>
<p>- bin: bin√°rios e scripts execut√°veis</p>
<p>- doc: documenta√ß√£o</p>
<p>- env: arquivos *.env "source√°veis"</p>
<p>- etc: hardlinks para arquivos de configura√ß√£o</p>
<p>- log: logs gerados por scripts do rice</p>
<p>- src: c√≥digo fonte de alguns bin√°rios</p>
<p>- var: arquivos *.dat usados por scripts do ambiente</p>
<p>- wal: wallpapers</p>
</div>
<br>
<p>Vou explicar: $RICE/src √© onde ficam os softwares suckless. Eles s√£o compilados com <span class="inline-code">make</span>, nunca <span class="inline-code">sudo make install</span>, e o bin√°rio resultante fica l√° tamb√©m. </p>
<br>
<p>Em $RICE/bin ficam softlinks para esses bin√°rios. O $RICE/bin vai estar presente no $PATH. L√° tamb√©m vivem outros scripts usados pelo ambiente, como o script que gera a barra de status, ou o script que instala os config files de $RICE/etc no sistema. </p>
<br>
<p>Por falar em $RICE/etc, l√° ficam hardlinks para config files que podem estar em qualquer lugar do sistema. Por exemplo, a configura√ß√£o do vim est√° em ~/.vimrc, e $RICE/etc/vim/vimrc √© um hardlink para ela. Assim voc√™ mant√©m todos os config files do sistema em um s√≥ diret√≥rio por praticidade e tamb√©m para facilmente portar para outro sistema ou para outro usu√°rio no sistema. </p>
<br>
<p>Os arquivos em $RICE/env s√£o "sourceados" pelo ~/.bashrc. L√° ficam vari√°veis de ambiente, o prompt, aliases, etc. </p>
<br>
<p>O diret√≥rio $RICE/api e $RICE/var s√£o irm√£os. Em $RICE/api ficam scripts menores que s√£o chamados pelo cron ou pelo xbindkeys. Por exemplo, um cronjob a cada 5 minutos executa um script de "curlar" o pre√ßo do bitcoin, ou a temperatura atual, etc. Este script deve ficar em $RICE/api. E onde ele vai guardar essa informa√ß√£o? Em $RICE/var. L√° ficam arquivos *.dat vari√°veis, gerados pelos scripts em $RICE/api. Alguns tamb√©m podem escrever em $RICE/log, que √© onde ficam os logs gerados pelo ambiente. L√° se pode guardar coisas como logs de erro ou logs gerados por scripts em $RICE/api, como um hist√≥rico do uso da CPU ou algo assim. </p>
<br>
<p>Em $RICE/doc fica uma pequena explica√ß√£o desta estrutura e √© um espa√ßo para escrever algo sobre o ambiente, como TODOs, etc. Por fim, $RICE/wal guarda wallpapers.</p>
<br>
<h2>Como ficou meu ricing?</h2>
<p>Meu ricing rec√©m instalado ficou assim: </p>
<br>
<br>
<img src="https://raw.githubusercontent.com/saindodafalha/sdf-autorice/refs/heads/master/doc/p-2-new-rice-1.png" style="width:100%">
<br>
<br>
<br>
<img src="https://raw.githubusercontent.com/saindodafalha/sdf-autorice/refs/heads/master/doc/p-2-new-rice-2.png" style="width:100%">
<br> 
<br>
<br>
<img src="https://raw.githubusercontent.com/saindodafalha/sdf-autorice/refs/heads/master/doc/p-2-new-rice-3.png" style="width:100%">
<br>
<br>
<p>Simplesmente lindo e n√£o cansa os olhos. Eu n√£o sei por que eu nunca fiz isso antes.</p>
<p>√â uma instala√ß√£o bem b√°sica, s√≥ est√° presente coisas que eu sei que sempre irei usar em qualquer sistema. </p>
<p>O resto eu configuro independentemente para cada usu√°rio.</p>
<br>
<h2>Script de instala√ß√£o</h2>
<p>J√° que eu vou instalar essa coisa em VMs quero que seja muito f√°cil de instalar e por isso escrevi um script de instala√ß√£o.</p>
<p>Vou deixar documentado aqui para eu n√£o esquecer e para quem quiser testar meu rice. Abaixo, como instalar meu ricing lind√£o.</p>
<br>
<p>Esta coisa foi feita para funcionar em um Debian 12 rec√©m instalado sem nenhum DE. N√£o testei isso em nenhum outro contexto.</p>
<br>
<h4>Depend√™ncias:</h4>
<p>Para instalar as depend√™ncias rode do tty de um Debian 12 rec√©m instalado:</p>
<div class="code"> 
<p>$ sudo apt install make gcc patch libxrandr-dev libx11-dev libxft-dev libxinerama-dev xorg dunst libnotify-bin xbindkeys feh fonts-font-awesome fonts-noto-color-emoji pulseaudio picom</p>
</div> 
<br>
<h3>Instalando meu ricing</h3>
<p>Baixe e rode o script de instala√ß√£o:</p>
<div class="code">
<p>$ wget https://raw.githubusercontent.com/saindodafalha/sdf-autorice/refs/heads/master/autorice.sh</p>
<p>$ chmod u+x autorice.sh</p>
<p>$ ./autorice.sh</p>
</div>
<br>
<p>Ao final, rode:</p>
<div class="code">$ source ~/.profile && startx</div>
<br>
<p>Pronto, est√° instalado. Simple assim. A parte mais demorada √© a instala√ß√£o das depend√™ncias, j√° o ricing leva menos de dois minutos.</p>
<br>
<h3>Observa√ß√µes importantes</h3>
<br>
<h4>Pulseaudio</h4>
<p>Por padr√£o, o Debian sem DE vem com o √°udio mutado. O script de instala√ß√£o tenta arrumar o √°udio automaticamente, mudando pra 50% e tirando do mudo.</p>
<p>Por√©m, nem sempre funciona e, quando n√£o funciona, voc√™ pode simplesmente fazer isso manualmente, o que n√£o √© dif√≠cil.</p>
<p>Em $RICE/env/globals.env existe a vari√°vel de ambiente MY_PACTL_SINK com o valor 0. √â o sink do pulseaudio que acredito que o padr√£o seja 0. Caso o seu sink seja outro, por exemplo, 1, voc√™ precisar√° mudar essa vari√°vel e relogar para os keybindings de volume funcionarem.</p>
<br>
<h4>Virtualbox</h4>
<p>√Äs vezes o Virtualbox n√£o reconhece direito minhas teclas de fun√ß√£o. Quando digito <kbd>SUPER + F2</kbd>, ao inv√©s de sair MOD4 + F2, sai MOD4 + SuperL. Meus bindings de volume usam as teclas de fun√ß√£o e por isso n√£o funcionam no Virtualbox. Acho que isso √© coisa do meu teclado vagabundo, mas se acontecer com voc√™ √© s√≥ mudar os bindings para outras teclas.</p>
<br>
<h4>Emojis no dwm/dmenu</h4>
<p>Se voc√™ quiser emojis funcionando na barra do dwm, veja: <a target="_blank" href="https://youtu.be/MjDkSm60RiQ?si=f9-htNPX2omiZPAV&t=141">EMOJIS no DWM/DWMBLOCKS/DMENU/ST sem o LIBXFT-BGRA</a></p>
<br>
<h4>Slock</h4>
<p>Para o slock funcionar com usu√°rios que n√£o s√£o o root, fa√ßa isso:</p>
<div class="code">
<p>$ cd $RICE/src/slock-1.5/</p>
<p>$ sudo chown root:root ./slock</p>
<p>$ sudo chmod u+s ./slock</p>
</div>
<br>
<h2>Conclus√£o</h2>
<p>Eu achava que isso de ficar customizando a distro era frescura, mas realmente faz uma enorme diferen√ßa. Eu espero n√£o precisar fazer isso nunca mais, porque √© chato e toma tempo. </p>
<p>No final valeu a pena. Ficou muito melhor e n√£o precisarei fazer isso nunca mais porque √© s√≥ rodar um script. </p>
<p>E eu nunca sei se o termo certo em "portugu√™s" seria "rice" ou "ricing". Ali√°s, por que o nome disso sequer √© rice?</p>
<br>
<p>UPDATE: Este post est√° n√£o-listado porque o script est√° desatualizado e n√£o estou mais mantendo isso.</p>
<p><!--ARTICLE-IS-SIGNED--> </p>
<p><!--^Minha vida √© uma bosta, mas meu rice est√° bonit√£o^1734467203^üçô^NEVER^defaults^01d846a79b5e9d56eff54daacdfaa32b18981e15c194ba616767e9d6b5547a89^<div>Saindo da Falha<br>Bloco 875198 (17/12/2024) <br>Numa tardinha ensolarada e quente de ter√ßa-feira.<br>Quando 1‚Çø valia $106229 e a taxa de rede custava 8sat/vB.</div>^linux ricing^--></p>
<p><!--^Minha vida √© uma bosta, mas meu rice est√° bonit√£o^1734467203^üçô^1736539435^defaults^dfbd30ef62741180b0d8c7cadd7ce5cbf853fc51377963d46177b0f990d3bb3d^<div>Saindo da Falha<br>Bloco 875198 (17/12/2024) <br>Numa tardinha ensolarada e quente de ter√ßa-feira.<br>Quando 1‚Çø valia $106229 e a taxa de rede custava 8sat/vB.</div>^linux ricing^--></p>
<p><!--^Minha vida √© uma bosta, mas meu rice est√° bonit√£o^1734467203^üçô^1739717965^hidden no-rss^83aa509c21b91b598f3ce7e638dd68370c60d31a20b46e8299b306cb27bb76a4^<div>Saindo da Falha<br>Bloco 875198 (17/12/2024) <br>Numa tardinha ensolarada e quente de ter√ßa-feira.<br>Quando 1‚Çø valia $106229 e a taxa de rede custava 8sat/vB.</div>^linux ricing^--></p>
   <br>
   <span class="color-weak mono-small">√öltima atualiza√ß√£o: 16/02/2025 11:59<br><br></span>
   <address>
      Saindo da Falha, Tuesday, 17/12/2024 17:26
   </address>
   <span id="page-tags">Tags: <a href='../tags/index.html#tag-linux'>linux</a> 
<a href='../tags/index.html#tag-ricing'>ricing</a> </span>
   <hr id="page-hr-separator-bottom">
   <br>
<h3>Coment√°rios:</h3>
<div id="HCB_comment_box" style="text-align:center"><span style="cursor:pointer;" id="load-comments" onclick="this.innerHTML='Carregando...'">üí¨ Carregando coment√°rios...</span></div>
<link rel="stylesheet" type="text/css" href="https://www.htmlcommentbox.com/static/skins/bootstrap/twitter-bootstrap.css?v=0" />

<script type="text/javascript" id="hcb">
   document.getElementById("load-comments").addEventListener('click', loadComments);
   function loadComments() {
      if (!window.hcb_user) {
        hcb_user = {};
      }(function() {
        let s = document.createElement("script"),
            l = hcb_user.PAGE || ("" + window.location).replace(/'/g, "%27"),
            h = "https://www.htmlcommentbox.com";
        s.setAttribute("type", "text/javascript");
        s.setAttribute("src", h + "/jread?page=" + encodeURIComponent(l).replace("+", "%2B") + "&mod=%241%24wq1rdBcg%24noOeNoU2cppcTsbYgYRgn%2F" + "&opts=16798&num=10&ts=1734891859180");
        if (typeof s != "undefined") document.getElementsByTagName("head")[0].appendChild(s);
      })(); 
   }
   loadComments() // Carregar automaticamente
</script>

<br>
<p class="color-weak mono-small">Powered by <a href="https://www.htmlcommentbox.com/">HTML Comment Box</a>.</p>
<br>
   <div class="prev-next"> <span><a href="../../index.html">[Home]</a></span> </div>
</article>
      </main>

      <!-- side menu, projects, navigation, etc -->
      <aside class="side-blocks">
         
      </aside>
   </div>

   <!-- site footer -->
   <footer>
      <i></i>
   </footer>
</div>
</body>
</html> 
